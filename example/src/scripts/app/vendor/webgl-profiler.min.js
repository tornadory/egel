"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var css="\n.alarm{\n    color: #e88787;\n}\n\n.rs-base{\n    color: white;\n    position: absolute;\n    z-index: 10000;\n    padding: 3px;\n    background-color: #000;\n    font-size: 10px;\n    line-height: 1.2em;\n    width: 234px;\n    font-family: 'Helvetica',Arial,sans-serif;\n    left: 0;\n    top: 48px;\n    overflow: hidden;\n}\n\n.rs-base h1{\n    margin: 0;\n    padding: 0;\n    font-size: 1.4em;\n    color: #fff;\n    margin-bottom: 5px;\n    cursor: pointer;\n}\n\n.rs-base div.rs-group{\n    margin-bottom: 3px;\n}\n\n.rs-base div.rs-group.hidden{\n    display: none;\n}\n\n.rs-base div.rs-fraction{\n    position: relative;\n    margin-bottom: 3px;\n}\n\n.rs-base div.rs-fraction p{\n    width: 80px;\n    text-align: right;\n    margin: 0;\n    padding: 0;\n}\n\n.rs-base div.rs-legend{\n    position: absolute;\n    line-height: 1em;\n}\n\n.rs-base div.rs-counter-base{\n    position: relative;\n    margin: 2px 0;\n    height: 1em;\n}\n\n.rs-base span.rs-counter-id{\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.rs-base div.rs-counter-value{\n    position: absolute;\n    left: 50px;\n    width: 30px;\n    height: 1em;\n    top: 0;\n    text-align: right;\n}\n\n.rs-base canvas.rs-canvas{\n    position: absolute;\n    right: 0;\n}",head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),function(){if(void 0===window.performance&&(window.performance={}),!window.performance.now){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}window.performance.mark||(window.performance.mark=function(){}),window.performance.measure||(window.performance.measure=function(){})}(),window.rStats=function(e){function t(e,t){for(var n=Object.keys(e),a=0,r=n.length;a<r;a++)t(n[a])}var n=e||{},a=n.colours||["#e88787","#c74900","#fcb300","#284280","#4c7c0c"];n.values||(n.values={});var r,o,i=10,l=140,s={};function c(e,t){var a,r=e,s=0,c=0,d=0,p=0,f=performance.now(),u=0,m=document.createElement("div"),h=document.createElement("span"),g=document.createElement("div"),v=document.createTextNode(""),w=n?n.values[r.toLowerCase()]:null,y=new function(e,t,n){var a=n||{},r=document.createElement("canvas"),o=r.getContext("2d"),s=0,c=0,d=a.color?a.color:"#666666",p=document.createElement("canvas"),f=p.getContext("2d");p.width=1,p.height=2*i,f.fillStyle="#303030",f.fillRect(0,0,1,2*i),f.fillStyle=d,f.fillRect(0,i,1,i),f.fillStyle="#ffffff",f.globalAlpha=.5,f.fillRect(0,i,1,1),f.globalAlpha=1;var u=document.createElement("canvas"),m=u.getContext("2d");return u.width=1,u.height=2*i,m.fillStyle="#303030",m.fillRect(0,0,1,2*i),m.fillStyle="#b70000",m.fillRect(0,i,1,i),m.globalAlpha=.5,m.fillStyle="#ffffff",m.fillRect(0,i,1,1),m.globalAlpha=1,r.width=l,r.height=i,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",e.appendChild(r),o.fillStyle="#303030",o.fillRect(0,0,r.width,r.height),{draw:function(e,t){(c+=.1*(e-c))>(s*=.99)&&(s=c),o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),t?o.drawImage(u,r.width-1,r.height-c*r.height/s-i):o.drawImage(p,r.width-1,r.height-c*r.height/s-i)}}}(m,r,w),x=!1;function b(e){if(w&&w.average){p+=e,u++;var t=performance.now();t-f>=(w.avgMs||1e3)&&(d=p/u,p=0,f=t,u=0)}}function S(){a=performance.now(),n.userTimingAPI&&performance.mark(r+"-start"),x=!0}function C(){s=performance.now()-a,n.userTimingAPI&&(performance.mark(r+"-end"),x&&performance.measure(r,r+"-start",r+"-end")),b(s)}return h.className="rs-counter-id",h.textContent=w&&w.caption?w.caption:r,g.className="rs-counter-value",g.appendChild(v),m.appendChild(h),m.appendChild(g),t?t.div.appendChild(m):o.appendChild(m),a=performance.now(),{set:function(e){b(s=e)},start:S,tick:function(){C(),S()},end:C,frame:function(){var e=performance.now(),t=e-a;c++,t>1e3&&(s=w&&!1===w.interpolate?c:1e3*c/t,c=0,a=e,b(s))},value:function(){return s},draw:function(){var e=w&&w.average?d:s;v.nodeValue=Math.round(100*e)/100;var t=w&&(w.below&&s<w.below||w.over&&s>w.over);y.draw(s,t),m.className=t?"rs-counter-base alarm":"rs-counter-base"}}}function d(e){var a=e.toLowerCase();if(void 0===a&&(a="default"),s[a])return s[a];var r=null;n&&n.groups&&t(n.groups,function(e){var t=n.groups[parseInt(e,10)];r||-1===t.values.indexOf(a.toLowerCase())||(r=t)});var o=new c(a,r);return s[a]=o,o}function p(){t(n.plugins,function(e){n.plugins[e].update()}),t(s,function(e){s[e].draw()}),n&&n.fractions&&t(n.fractions,function(e){var a=n.fractions[parseInt(e,10)],r=[],o=s[a.base.toLowerCase()];o&&(o=o.value(),t(n.fractions[e].steps,function(t){var a=n.fractions[e].steps[parseInt(t,10)].toLowerCase(),i=s[a];i&&r.push(i.value()/o)})),a.graph.draw(r)})}return function(){if(n.plugins){n.values||(n.values={}),n.groups||(n.groups=[]),n.fractions||(n.fractions=[]);for(var e=0;e<n.plugins.length;e++)n.plugins[e].attach(d),t(n.plugins[e].values,function(t){n.values[t]=n.plugins[e].values[t]}),n.groups=n.groups.concat(n.plugins[e].groups),n.fractions=n.fractions.concat(n.plugins[e].fractions)}else n.plugins={};(r=document.createElement("div")).className="rs-base",(o=document.createElement("div")).className="rs-container",o.style.height="auto",r.appendChild(o),document.body.appendChild(r),n&&(n.groups&&t(n.groups,function(e){var t=n.groups[parseInt(e,10)],a=document.createElement("div");a.className="rs-group",t.div=a,o.appendChild(a)}),n.fractions&&t(n.fractions,function(e){var r=n.fractions[parseInt(e,10)],s=document.createElement("div");s.className="rs-fraction";var c=document.createElement("div");c.className="rs-legend";var d=0;t(n.fractions[e].steps,function(t){var r=document.createElement("p");r.textContent=n.fractions[e].steps[t],r.style.color=a[d],c.appendChild(r),d++}),s.appendChild(c),s.style.height=d*i+"px",r.div=s;var p=new function(e,n){var r=document.createElement("canvas"),o=r.getContext("2d");return r.width=l,r.height=i*n,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",e.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(e){o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height);var n=0;t(e,function(t){var i=e[t]*r.height;o.fillStyle=a[t],o.fillRect(r.width-1,n,1,i),n+=i})}}}(s,d);r.graph=p,o.appendChild(s)}))}(),function(e){return e?d(e):{element:r,update:p}}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports=window.rStats),window.glStats=function(){var e=null,t=0,n=0,a=0,r=0,o=0,i=0,l=0;function s(e,t){return function(){t.apply(this,arguments),e.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=s(WebGLRenderingContext.prototype.drawArrays,function(){t++,arguments[0]==this.POINTS?i+=arguments[2]:o+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=s(WebGLRenderingContext.prototype.drawElements,function(){n++,r+=arguments[1]/3,o+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=s(WebGLRenderingContext.prototype.useProgram,function(){a++}),WebGLRenderingContext.prototype.bindTexture=s(WebGLRenderingContext.prototype.bindTexture,function(){l++});return{update:function(){e("allcalls").set(t+n),e("drawElements").set(n),e("drawArrays").set(t),e("bindTexture").set(l),e("useProgram").set(a),e("glfaces").set(r),e("glvertices").set(o),e("glpoints").set(i)},start:function(){t=0,n=0,a=0,r=0,o=0,i=0,l=0},end:function(){},attach:function(t){e=t},values:{allcalls:{over:3e3,caption:"drawCalls"},drawelements:{caption:"drawElements"},drawarrays:{caption:"drawArrays"},useprogram:{caption:"useProgram"},bindtexture:{caption:"bindTexture"},glfaces:{caption:"glFaces"},glvertices:{caption:"glVertices"},glpoints:{caption:"glPoints"}},groups:[{values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[]}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports={glStats:window.glStats});var Stats=function e(){var t=document.createElement("div");function n(e){return t.appendChild(e.dom),e}t.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000";var a=(performance||Date).now(),r=a,o=0,i=n(new e.Panel("FPS","#fff","#000")),l=n(new e.Panel("MS","#fff","#000"));return{REVISION:16,dom:t,addPanel:n,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();return l.update(e-a,200),e>r+60&&(i.update(1e3*o/(e-r),100),r=e,o=0),e},update:function(){a=this.end()}}};Stats.Panel=function(e,t,n){var a=1/0,r=0,o=Math.round,i=o(window.devicePixelRatio||1),l=80*i,s=48*i,c=3*i,d=2*i,p=3*i,f=15*i,u=74*i,m=30*i,h=document.createElement("canvas");h.width=l,h.height=s,h.style.cssText="width:80px;height:48px";var g=h.getContext("2d");return g.font="bold "+9*i+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,l,s),g.fillStyle=t,g.fillText(e,c,d),g.fillRect(p,f,u,m),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(p,f,u,m),{dom:h,update:function(s,v){a=Math.min(a,s),r=Math.max(r,s),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,l,f),g.fillStyle=t,g.fillText(o(s)+" "+e+" ("+o(a)+"-"+o(r)+")",c,d),g.drawImage(h,p+i,f,u-i,m,p,f,u-i,m),g.fillRect(p+u-i,f,i,m),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(p+u-i,f,i,o((1-s/v)*m))}}};var MemoryStats=function(){var e=100,t=0,n=30,a=document.createElement("div");a.id="stats",a.style.cssText="position:fixed;top:0;left:160px;width:80px;height:48px;opacity:0.9;overflow:hidden;z-index:10000;will-change:transform;";var r=document.createElement("div");r.id="ms",r.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#000;",a.appendChild(r);var o=document.createElement("div");o.id="msText",o.style.cssText="color:#fff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",o.innerHTML="Memory",r.appendChild(o);var i=document.createElement("div");for(i.id="msGraph",i.style.cssText="position:relative;width:74px;height:30px;background-color:#fff",r.appendChild(i);i.children.length<74;){var l=document.createElement("span");l.style.cssText="width:1px;height:30px;float:left;opacity:0.9;background-color:#000",i.appendChild(l)}window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var s,c,d=["Bytes","KB","MB","GB","TB"];var p=Date.now(),f=performance.memory.usedJSHeapSize,u=0,m="#000",h=0,g=0,v=0;return{domElement:a,update:function(){var a,r,l,w,y;Date.now()-p<1e3/30||(p=Date.now(),u=performance.memory.usedJSHeapSize-f,f=performance.memory.usedJSHeapSize,m=u<0?"#e88787":"#000",h=f,e=Math.min(e,h),t=Math.max(t,h),o.textContent=(r=2,0===(a=h)?"n/a":(r=void 0!==r?r:0,s=Math.pow(10,r),c=Math.floor(Math.log(a)/Math.log(1024)),Math.round(a*s/Math.pow(1024,c))/s+" "+d[c])),(g=h/1048576)>n&&(l=i,w=30/n,y=30/(v=30*((g-g%30)/30+1)),[].forEach.call(l.children,function(e){var t=30-(30-e.style.height.substring(0,e.style.height.length-2))/w*y;e.style.height=t+"px"}),n=v),function(e,t,n){var a=e.appendChild(e.firstChild);a.style.height=t+"px",a.style.opacity=.9,n&&(a.style.backgroundColor=n)}(i,30-g*(30/n),m))}}},WebGLProfiler=function(){function e(){_classCallCheck(this,e),this.stats=new Stats,document.body.appendChild(this.stats.dom),this.memoryStats=new MemoryStats,document.body.appendChild(this.memoryStats.domElement),this.glStats=new glStats,this.rS=new rStats({plugins:[this.glStats]})}return _createClass(e,[{key:"begin",value:function(){this.stats.begin(),this.memoryStats.update(),this.glStats.start()}},{key:"end",value:function(){this.rS().update(),this.stats.end()}}]),e}();
