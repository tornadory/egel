!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("egel",[],e):"object"==typeof exports?exports.egel=e():t.egel=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=22)}([function(t,e,r){"use strict";function n(t){a=t}function i(){return a}Object.defineProperty(e,"__esModule",{value:!0}),e.set=n,e.get=i;var a},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var i=r(2),a=n(i),o=r(23),s=n(o),u=r(24),c=n(u),h=r(12),f=n(h),l=r(25),v=n(l),d=r(26),p=n(d),m=r(27),M=n(m),b=r(13),y=n(b),E=r(14),x=n(E);e.glMatrix=a,e.mat2=s,e.mat2d=c,e.mat3=f,e.mat4=v,e.quat=p,e.vec2=M,e.vec3=y,e.vec4=x},function(t,e,r){"use strict";function n(t){e.ARRAY_TYPE=s=t}function i(t){return t*u}function a(t,e){return Math.abs(t-e)<=o*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=n,e.toRadian=i,e.equals=a;var o=e.EPSILON=1e-6,s=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,u=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),function(){function t(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.v=n.vec3.create(),this.set(t,e,r),this}return Object.defineProperty(t.prototype,"x",{get:function(){return this.v[0]},set:function(t){this.v[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.v[1]},set:function(t){this.v[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.v[2]},set:function(t){this.v[2]=t},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e,r){return n.vec3.set(this.v,t,e,r),this},t.prototype.clone=function(){return new t(this.v[0],this.v[1],this.v[2])},t.prototype.copy=function(t){return n.vec3.copy(this.v,t.v),this},t.prototype.add=function(t){return n.vec3.add(this.v,this.v,t.v),this},t.prototype.subtract=function(t){return n.vec3.subtract(this.v,this.v,t.v),this},t.prototype.subtractVectors=function(t,e){var r=n.vec3.create();return n.vec3.subtract(r,t.v,e.v),r},t.prototype.scale=function(t){return n.vec3.scale(this.v,this.v,t),this},t.prototype.distance=function(t){return n.vec3.distance(this.v,t.v)},t.prototype.length=function(){return n.vec3.length(this.v)},t.prototype.negate=function(){return n.vec3.negate(this.v,this.v),this},t.prototype.normalize=function(){return n.vec3.normalize(this.v,this.v),this},t.prototype.dot=function(t){return n.vec3.dot(this.v,t.v)},t.prototype.cross=function(t){return n.vec3.cross(this.v,this.v,t.v),this},t.prototype.crossVectors=function(t,e){var r=n.vec3.create();return n.vec3.cross(r,t.v,e.v),r},t.prototype.lerp=function(t,e){return n.vec3.lerp(this.v,this.v,t.v,e),this},t.prototype.equals=function(t){return n.vec3.equals(this.v,t.v)},t.prototype.multiply=function(t){return this.v[0]*=t.v[0],this.v[1]*=t.v[1],this.v[2]*=t.v[2],this},t.prototype.fromArray=function(t){return n.vec3.copy(this.v,t)},t.up=new t(0,1,0),t}());e.a=i},function(t,e,r){"use strict";function n(t,e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}function i(t){var e=s.PRECISION,r=n(t,e);return r!==e&&(Object(u.b)("Capabilities: "+e+" not supported, using "+r+" instead"),e=r),{maxTextures:t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),maxVertexTextures:t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),precision:e}}function a(t){return{angleInstancedArraysExtension:t.getExtension("ANGLE_instanced_arrays")||!1,vertexArrayObjectExtension:t.getExtension("OES_vertex_array_object")||!1}}function o(t){c=i(t),h=a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.set=o,r.d(e,"capabilities",function(){return c}),r.d(e,"extensions",function(){return h});var s=r(5),u=r(6),c={},h={}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"CULL_NONE",function(){return n}),r.d(e,"CULL_BACK",function(){return i}),r.d(e,"CULL_FRONT",function(){return a}),r.d(e,"CULL_FRONT_AND_BACK",function(){return o}),r.d(e,"DRAW_POINTS",function(){return s}),r.d(e,"DRAW_LINES",function(){return u}),r.d(e,"DRAW_LINE_LOOP",function(){return c}),r.d(e,"DRAW_LINE_STRIP",function(){return h}),r.d(e,"DRAW_TRIANGLES",function(){return f}),r.d(e,"MAX_DEVICE_PIXEL_RATIO",function(){return l}),r.d(e,"RENDERER_DEFAULT_WIDTH",function(){return v}),r.d(e,"RENDERER_DEFAULT_HEIGHT",function(){return d}),r.d(e,"RENDERER_DEFAULT_ASPECT_RATIO",function(){return p}),r.d(e,"PRECISION",function(){return m});var n=-1,i=1029,a=1028,o=1032,s=0,u=1,c=2,h=3,f=4,l=2,v=window.innerWidth,d=window.innerHeight,p=v/d,m="highp"},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return i});var n=function(){return window.console&&console.log?Function.prototype.bind.call(console.log,console):function(){}}(),i=(function(){window.console&&console.clear&&Function.prototype.bind.call(console.clear,console)}(),function(){window.console&&console.debug&&Function.prototype.bind.call(console.debug,console)}(),function(){window.console&&console.info&&Function.prototype.bind.call(console.info,console)}(),function(){return window.console&&console.warn?Function.prototype.bind.call(console.warn,console):function(){}}());!function(){window.console&&console.error&&Function.prototype.bind.call(console.error,console)}()},function(t,e,r){"use strict";function n(t,e,r){return Math.max(Math.min(t,r),e)}function i(t,e,r){return t+(e-t)*r}function a(t,e,r){var n=o.quat.create(),i=o.vec3.create(),a=o.vec3.create(),s=o.vec3.create();return o.vec3.sub(s,t,e),0===o.vec3.squaredLength(s)&&(s[2]=1),o.vec3.normalize(s,s),o.vec3.cross(i,r,s),0===o.vec3.squaredLength(i)&&(s[2]+=1e-4,o.vec3.cross(i,r,s)),o.vec3.normalize(i,i),o.vec3.cross(a,s,i),o.quat.setAxes(n,s,i,a),o.quat.invert(n,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=n,e.lerp=i,e.lookAt=a;var o=r(1);r.n(o)},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),r(5)),a=r(3),o=function(){function t(t){this.projectionMatrix=n.mat4.create(),this.worldInverseMatrix=n.mat4.create(),this.isCamera=!0,this.isPespectiveCamera=!1,this.isOrthographicCamera=!1,this.near=.1,this.far=100,this.fieldOfView=70,this.aspectRatio=i.RENDERER_DEFAULT_ASPECT_RATIO,this.position=new a.a,this.target=new a.a,this.up=new a.a(0,1,0),Object.assign(this,t)}return t.prototype.lookAt=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.target.set(t,e,r)},t.prototype.updateMatrixWorld=function(){n.mat4.identity(this.worldInverseMatrix),n.mat4.lookAt(this.worldInverseMatrix,this.position.v,this.target.v,this.up.v)},t.prototype.updateProjectionMatrix=function(){},t}();e.a=o},function(t,e,r){"use strict";var n,i=r(1),a=(r.n(i),r(4)),o=r(0),s=r(5),u=r(31),c=r(32),h=r(33),f=r(34),l=r(3),v=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},d=i.mat3.create(),p=i.mat4.create(),m=function(){function t(t){void 0===t&&(t={}),n=o.get();var e="physical"===t.type?f.a:c.a;this.type="",this.uniforms={},this.hookName="",this.hookVertexPre="",this.hookVertexMain="",this.hookVertexEnd="",this.hookFragmentPre="",this.hookFragmentMain="",this.hookFragmentEnd="",this.vertexShader=h.a,this.fragmentShader=e,this.drawType=s.DRAW_TRIANGLES,this.culling=s.CULL_NONE,this.blending=!1,this.blendFunc=[n.SRC_ALPHA,n.ONE],Object.assign(this,t),this.program=new u.a}return t.prototype.create=function(t){var e=this;n=o.get(),this.vertexShader=this.processShader(this.vertexShader,t),this.fragmentShader=this.processShader(this.fragmentShader,t),this.program.link(this.vertexShader,this.fragmentShader),this.customUniforms=this.uniforms||{};var r=[n.TEXTURE0,n.TEXTURE1,n.TEXTURE2,n.TEXTURE3,n.TEXTURE4,n.TEXTURE5];Object.keys(this.uniforms).forEach(function(t,n){switch(e.uniforms[t].type){case"t":case"tc":e.uniforms[t].textureIndex=n,e.uniforms[t].activeTexture=r[n]}});var a={uProjectionMatrix:{location:null,type:"4fv",value:i.mat4.create()}};this.uniforms=v({uDiffuse:{location:null,type:"3f",value:(new l.a).v},uModelMatrix:{location:null,type:"4fv",value:i.mat4.create()},uModelViewMatrix:{location:null,type:"4fv",value:i.mat4.create()},uNormalMatrix:{location:null,type:"4fv",value:i.mat4.create()}},this.customUniforms,a),Object.keys(this.uniforms).forEach(function(t){e.program.setUniformLocation(e.uniforms,t)})},t.prototype.processShader=function(t,e){function r(t){i+="#define "+t+" \n"}n=o.get();var i="",s="precision "+a.capabilities.precision+" float;";return e.bufferUvs&&r("HAS_UVS"),e.bufferColors&&r("HAS_VERTEX_COLORS"),e.bufferNormals&&r("HAS_NORMALS"),t=t.replace(/<HOOK_PRECISION>/g,s),t=t.replace(/<HOOK_DEFINES>/g,i),t=t.replace(/<HOOK_NAME>/g,"#define SHADER_NAME "+this.hookName),t=t.replace(/<HOOK_VERTEX_PRE>/g,this.hookVertexPre),t=t.replace(/<HOOK_VERTEX_MAIN>/g,this.hookVertexMain),t=t.replace(/<HOOK_VERTEX_END>/g,this.hookVertexEnd),t=t.replace(/<HOOK_FRAGMENT_PRE>/g,this.hookFragmentPre),t=t.replace(/<HOOK_FRAGMENT_MAIN>/g,this.hookFragmentMain),t=t.replace(/<HOOK_FRAGMENT_END>/g,this.hookFragmentEnd)},t.prototype.setUniforms=function(t,e,r,a){var s=this;n=o.get(),Object.keys(this.customUniforms).forEach(function(t){var e=s.uniforms[t];switch(e.type){case"t":n.uniform1i(e.location,e.textureIndex),n.activeTexture(e.activeTexture),n.bindTexture(n.TEXTURE_2D,e.value);break;case"tc":n.uniform1i(e.location,e.textureIndex),n.activeTexture(e.activeTexture),n.bindTexture(n.TEXTURE_CUBE_MAP,e.value);break;case"i":n.uniform1i(e.location,e.value);break;case"f":n.uniform1f(e.location,e.value);break;case"2f":n.uniform2f(e.location,e.value[0],e.value[1]);break;case"3f":n.uniform3f(e.location,e.value[0],e.value[1],e.value[2]);break;case"4f":n.uniform4f(e.location,e.value[0],e.value[1],e.value[2],e.value[3]);break;case"1iv":n.uniform1iv(e.location,e.value);break;case"2iv":n.uniform2iv(e.location,e.value);break;case"1fv":n.uniform1fv(e.location,e.value);break;case"2fv":n.uniform2fv(e.location,e.value);break;case"3fv":n.uniform3fv(e.location,e.value);break;case"4fv":n.uniform4fv(e.location,e.value);break;case"Matrix3fv":n.uniformMatrix3fv(e.location,!1,e.value);break;case"Matrix4fv":n.uniformMatrix4fv(e.location,!1,e.value)}}),n.uniformMatrix4fv(this.uniforms.uProjectionMatrix.location,!1,t),n.uniformMatrix4fv(this.uniforms.uModelViewMatrix.location,!1,e),n.uniformMatrix4fv(this.uniforms.uModelMatrix.location,!1,r),i.mat4.identity(p),i.mat4.invert(p,r),i.mat3.identity(d),i.mat3.fromMat4(d,p),i.mat3.transpose(d,d),n.uniformMatrix3fv(this.uniforms.uNormalMatrix.location,!1,d),n.uniform3f(this.uniforms.uDiffuse.location,this.uniforms.uDiffuse.value[0],this.uniforms.uDiffuse.value[1],this.uniforms.uDiffuse.value[2]),a&&this.uniforms.uCameraPosition&&n.uniform3f(this.uniforms.uCameraPosition.location,a.position.v[0],a.position.v[1],a.position.v[2])},t.prototype.dispose=function(){var t=this;Object.keys(this.customUniforms).forEach(function(e){var r=t.uniforms[e];switch(r.type){case"t":case"tc":n.deleteTexture(r.value)}}),this.program.dispose()},t}();e.a=m},function(t,e,r){"use strict";var n,i=r(4),a=r(0),o=r(16),s=r(17),u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(t){function e(e,r){var i=t.call(this)||this;return i.geometry=e,i.material=r,i.vertexArrayObject=new s.a,i.visible=!0,i.instanceCount=0,i.material.program.created||i.material.create(i.geometry),i.isInstanced=!1,n=a.get(),i.vertexArrayObject.bind(),i.bindAttributes(),i.bindAttributesInstanced(),i.bindIndexBuffer(),i.vertexArrayObject.unbind(),i}return u(e,t),e.prototype.setInstanceCount=function(t){n=a.get(),this.instanceCount=t,this.isInstanced=!0},e.prototype.bindAttributes=function(){var t=this;Object.keys(this.geometry.attributes).forEach(function(e){"aIndex"!==e&&(t.material.program.setAttributeLocation(e),t.geometry.attributes[e].bind(),t.material.program.setAttributePointer(e,t.geometry.attributes[e].itemSize))})},e.prototype.bindAttributesInstanced=function(){var t=this;Object.keys(this.geometry.attributesInstanced).forEach(function(e){"aIndex"!==e&&(t.material.program.setAttributeLocation(e),t.geometry.attributesInstanced[e].bind(),t.material.program.setAttributeInstancedPointer(e,t.geometry.attributesInstanced[e].itemSize),i.extensions.angleInstancedArraysExtension.vertexAttribDivisorANGLE(t.material.program.attributeLocations[e],1))})},e.prototype.bindIndexBuffer=function(){this.geometry.bufferIndices&&this.geometry.attributes.aIndex.bind()},e.prototype.draw=function(t){this.visible&&this.material.program.created&&(n=a.get(),this.updateMatrix(t),this.material.program.bind(),-1!==this.material.culling&&(n.enable(n.CULL_FACE),n.cullFace(this.material.culling)),this.material.setUniforms(t.projectionMatrix,this.modelViewMatrix,this.modelMatrix,t),i.extensions.vertexArrayObjectExtension?this.vertexArrayObject.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),this.geometry.attributes.aIndex?n.drawElements(this.material.drawType,this.geometry.attributes.aIndex.numItems,n.UNSIGNED_SHORT,0):n.drawArrays(this.material.drawType,0,this.geometry.attributes.aVertexPosition.numItems),i.extensions.vertexArrayObjectExtension&&this.vertexArrayObject.unbind(),-1!==this.material.culling&&n.disable(n.CULL_FACE))},e.prototype.drawInstance=function(t){this.visible&&this.material.program.created&&(n=a.get(),this.updateMatrix(t),this.material.program.bind(),this.material.setUniforms(t.projectionMatrix,this.modelViewMatrix,this.modelMatrix,t),-1!==this.material.culling&&(n.enable(n.CULL_FACE),n.cullFace(this.material.culling)),this.material.blending&&(n.enable(n.BLEND),n.blendFunc(this.material.blendFunc[0],this.material.blendFunc[1])),i.extensions.vertexArrayObjectExtension?this.vertexArrayObject.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),i.extensions.angleInstancedArraysExtension.drawElementsInstancedANGLE(this.material.drawType,this.geometry.attributes.aIndex.numItems,n.UNSIGNED_SHORT,0,this.instanceCount),i.extensions.vertexArrayObjectExtension&&this.vertexArrayObject.unbind(),-1!==this.material.culling&&n.disable(n.CULL_FACE),this.material.blending&&n.disable(n.BLEND))},e.prototype.dispose=function(){this.material.dispose(),this.geometry.dispose(),this.vertexArrayObject.dispose(),this.geometry=void 0,this.material=void 0,t.prototype.dispose.call(this)},e}(o.a);e.a=c},function(t,e,r){"use strict";var n,i=r(0),a=r(19),o=r(42),s=r(20),u=r(3),c=r(43),h=function(){function t(t,e,r,a,o){n=i.get(),this.bufferVertices=t,this.bufferIndices=e,this.bufferNormals=r,this.bufferUvs=a,this.bufferColors=o,this.attributes={},this.attributesInstanced={},this.bufferVertices&&(this.addAttribute("aVertexPosition",n.ARRAY_BUFFER,this.bufferVertices,3),this.generateVertices()),this.bufferIndices&&(this.addAttribute("aIndex",n.ELEMENT_ARRAY_BUFFER,this.bufferIndices,1,!1),this.generateFaces()),this.bufferNormals&&this.addAttribute("aVertexNormal",n.ARRAY_BUFFER,this.bufferNormals,3),this.bufferUvs&&(this.addAttribute("aUv",n.ARRAY_BUFFER,this.bufferUvs,2),this.generateUvs()),this.bufferColors&&this.addAttribute("aVertexColor",n.ARRAY_BUFFER,this.bufferColors,3)}return t.prototype.addAttribute=function(t,e,r,n,i){this.attributes[t]=new a.a(e,r,n,i)},t.prototype.addInstancedBufferAttribute=function(t,e,r){this.attributesInstanced[t]=new a.a(n.ARRAY_BUFFER,e,r)},t.prototype.generateVertices=function(){this.vertices=[];for(var t=0;t<this.bufferVertices.length;t+=3){var e=this.bufferVertices[t],r=this.bufferVertices[t+1],n=this.bufferVertices[t+2],i=new u.a(e,r,n);this.vertices.push(i)}},t.prototype.generateFaces=function(){this.faces=[];for(var t=0;t<this.bufferIndices.length;t+=3){var e=this.bufferIndices[t],r=this.bufferIndices[t+1],n=this.bufferIndices[t+2],i=this.vertices[e],a=this.vertices[r],s=this.vertices[n],u=new o.a(e,r,n,i,a,s);this.faces.push(u)}},t.prototype.generateUvs=function(){this.uvs=[];for(var t=0;t<this.bufferUvs.length;t+=2){var e=this.bufferUvs[t],r=this.bufferUvs[t+1],n=new s.a(e,r);this.uvs.push(n)}},t.prototype.updateVertices=function(){var t=this;n=i.get(),this.vertices.forEach(function(e,r){t.bufferVertices.set(e.v,r*e.v.length)}),this.attributes.aVertexPosition.update(this.bufferVertices)},t.prototype.updateNormals=function(){var t=[];this.faces.forEach(function(e){e.updateFaceNormal(),t[e.indices[0]]=e.normal.v,t[e.indices[1]]=e.normal.v,t[e.indices[2]]=e.normal.v}),this.bufferNormals.set(Object(c.a)(t)),this.attributes.aVertexNormal.update(this.bufferNormals)},t.prototype.dispose=function(){var t=this;n=i.get(),Object.keys(this.attributes).forEach(function(e){t.attributes[e].dispose(n),t.attributes[e]=void 0}),Object.keys(this.attributesInstanced).forEach(function(e){t.attributesInstanced[e].dispose(n),t.attributesInstanced[e]=void 0}),this.attributes=void 0,this.attributesInstanced=void 0,this.bufferVertices=void 0,this.bufferIndices=void 0,this.bufferNormals=void 0,this.bufferUvs=void 0,this.bufferColors=void 0},t}();e.a=h},function(t,e,r){"use strict";function n(){var t=new F.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new F.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(t,e,r,n,i,a,o,s,u){var c=new F.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=u,c}function u(t,e,r,n,i,a,o,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function f(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=h*o-s*c,l=-h*a+s*u,v=c*a-o*u,d=r*f+n*l+i*v;return d?(d=1/d,t[0]=f*d,t[1]=(-h*n+i*c)*d,t[2]=(s*n-i*o)*d,t[3]=l*d,t[4]=(h*r-i*u)*d,t[5]=(-s*r+i*a)*d,t[6]=v*d,t[7]=(-c*r+n*u)*d,t[8]=(o*r-n*a)*d,t):null}function l(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=o*h-s*c,t[1]=i*c-n*h,t[2]=n*s-i*o,t[3]=s*u-a*h,t[4]=r*h-i*u,t[5]=i*a-r*s,t[6]=a*c-o*u,t[7]=n*u-r*c,t[8]=r*o-n*a,t}function v(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-o*u)+r*(-c*i+o*s)+n*(u*i-a*s)}function d(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=r[0],v=r[1],d=r[2],p=r[3],m=r[4],M=r[5],b=r[6],y=r[7],E=r[8];return t[0]=l*n+v*o+d*c,t[1]=l*i+v*s+d*h,t[2]=l*a+v*u+d*f,t[3]=p*n+m*o+M*c,t[4]=p*i+m*s+M*h,t[5]=p*a+m*u+M*f,t[6]=b*n+y*o+E*c,t[7]=b*i+y*s+E*h,t[8]=b*a+y*u+E*f,t}function p(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=r[0],v=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l*n+v*o+c,t[7]=l*i+v*s+h,t[8]=l*a+v*u+f,t}function m(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=Math.sin(r),v=Math.cos(r);return t[0]=v*n+l*o,t[1]=v*i+l*s,t[2]=v*a+l*u,t[3]=v*o-l*n,t[4]=v*s-l*i,t[5]=v*u-l*a,t[6]=c,t[7]=h,t[8]=f,t}function M(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function y(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function _(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,h=n*o,f=n*s,l=i*o,v=i*s,d=i*u,p=a*o,m=a*s,M=a*u;return t[0]=1-f-d,t[3]=h-M,t[6]=l+m,t[1]=h+M,t[4]=1-c-d,t[7]=v-p,t[2]=l-m,t[5]=v+p,t[8]=1-c-f,t}function A(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],v=e[11],d=e[12],p=e[13],m=e[14],M=e[15],b=r*s-n*o,y=r*u-i*o,E=r*c-a*o,x=n*u-i*s,_=n*c-a*s,A=i*c-a*u,g=h*p-f*d,R=h*m-l*d,O=h*M-v*d,w=f*m-l*p,T=f*M-v*p,I=l*M-v*m,S=b*I-y*T+E*w+x*O-_*R+A*g;return S?(S=1/S,t[0]=(s*I-u*T+c*w)*S,t[1]=(u*O-o*I-c*R)*S,t[2]=(o*T-s*O+c*g)*S,t[3]=(i*T-n*I-a*w)*S,t[4]=(r*I-i*O+a*R)*S,t[5]=(n*O-r*T-a*g)*S,t[6]=(p*A-m*_+M*x)*S,t[7]=(m*E-d*A-M*y)*S,t[8]=(d*_-p*E+M*b)*S,t):null}function g(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function R(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function O(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function w(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function T(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function I(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function S(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function N(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=e[0],l=e[1],v=e[2],d=e[3],p=e[4],m=e[5],M=e[6],b=e[7],y=e[8];return Math.abs(r-f)<=F.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-l)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-v)<=F.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-d)<=F.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-p)<=F.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=F.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-M)<=F.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-b)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-y)<=F.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.fromMat4=i,e.clone=a,e.copy=o,e.fromValues=s,e.set=u,e.identity=c,e.transpose=h,e.invert=f,e.adjoint=l,e.determinant=v,e.multiply=d,e.translate=p,e.rotate=m,e.scale=M,e.fromTranslation=b,e.fromRotation=y,e.fromScaling=E,e.fromMat2d=x,e.fromQuat=_,e.normalFromMat4=A,e.projection=g,e.str=R,e.frob=O,e.add=w,e.subtract=T,e.multiplyScalar=I,e.multiplyScalarAndAdd=S,e.exactEquals=P,e.equals=N;var L=r(2),F=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(L);e.mul=d,e.sub=T},function(t,e,r){"use strict";function n(){var t=new X.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){var e=new X.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function o(t,e,r){var n=new X.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function c(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function h(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function f(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function l(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function v(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function p(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function m(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function M(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function y(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function E(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function x(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function _(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function A(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function g(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function R(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function w(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t}function T(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}function I(t,e,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),h=o*(3-2*a);return t[0]=e[0]*s+r[0]*u+n[0]*c+i[0]*h,t[1]=e[1]*s+r[1]*u+n[1]*c+i[1]*h,t[2]=e[2]*s+r[2]*u+n[2]*c+i[2]*h,t}function S(t,e,r,n,i,a){var o=1-a,s=o*o,u=a*a,c=s*o,h=3*a*s,f=3*u*o,l=u*a;return t[0]=e[0]*c+r[0]*h+n[0]*f+i[0]*l,t[1]=e[1]*c+r[1]*h+n[1]*f+i[1]*l,t[2]=e[2]*c+r[2]*h+n[2]*f+i[2]*l,t}function P(t,e){e=e||1;var r=2*X.RANDOM()*Math.PI,n=2*X.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function N(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function L(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function F(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2],c=r[3],h=c*n+s*a-u*i,f=c*i+u*n-o*a,l=c*a+o*i-s*n,v=-o*n-s*i-u*a;return t[0]=h*c+v*-o+f*-u-l*-s,t[1]=f*c+v*-s+l*-o-h*-u,t[2]=l*c+v*-u+h*-s-f*-o,t}function D(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function U(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function j(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function C(t,e){var r=o(t[0],t[1],t[2]),n=o(e[0],e[1],e[2]);R(r,r),R(n,n);var i=O(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function k(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function B(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(r-a)<=X.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=X.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=X.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=i,e.length=a,e.fromValues=o,e.copy=s,e.set=u,e.add=c,e.subtract=h,e.multiply=f,e.divide=l,e.ceil=v,e.floor=d,e.min=p,e.max=m,e.round=M,e.scale=b,e.scaleAndAdd=y,e.distance=E,e.squaredDistance=x,e.squaredLength=_,e.negate=A,e.inverse=g,e.normalize=R,e.dot=O,e.cross=w,e.lerp=T,e.hermite=I,e.bezier=S,e.random=P,e.transformMat4=N,e.transformMat3=L,e.transformQuat=F,e.rotateX=D,e.rotateY=U,e.rotateZ=j,e.angle=C,e.str=k,e.exactEquals=B,e.equals=V;var q=r(2),X=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(q);e.sub=h,e.mul=f,e.div=l,e.dist=E,e.sqrDist=x,e.len=a,e.sqrLen=_,e.forEach=function(){var t=n();return function(e,r,n,i,a,o){var s=void 0,u=void 0;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,r){"use strict";function n(){var t=new D.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t){var e=new D.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,r,n){var i=new D.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function u(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function c(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function h(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function f(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function l(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function p(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function M(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function b(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function y(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+a*a)}function E(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function x(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function _(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function A(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function g(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function R(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o),t}function O(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function w(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}function T(t,e){return e=e||1,t[0]=D.RANDOM(),t[1]=D.RANDOM(),t[2]=D.RANDOM(),t[3]=D.RANDOM(),R(t,t),M(t,t,e),t}function I(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function S(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2],c=r[3],h=c*n+s*a-u*i,f=c*i+u*n-o*a,l=c*a+o*i-s*n,v=-o*n-s*i-u*a;return t[0]=h*c+v*-o+f*-u-l*-s,t[1]=f*c+v*-s+l*-o-h*-u,t[2]=l*c+v*-u+h*-s-f*-o,t[3]=e[3],t}function P(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function L(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-o)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=D.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=D.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=i,e.fromValues=a,e.copy=o,e.set=s,e.add=u,e.subtract=c,e.multiply=h,e.divide=f,e.ceil=l,e.floor=v,e.min=d,e.max=p,e.round=m,e.scale=M,e.scaleAndAdd=b,e.distance=y,e.squaredDistance=E,e.length=x,e.squaredLength=_,e.negate=A,e.inverse=g,e.normalize=R,e.dot=O,e.lerp=w,e.random=T,e.transformMat4=I,e.transformQuat=S,e.str=P,e.exactEquals=N,e.equals=L;var F=r(2),D=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(F);e.sub=c,e.mul=h,e.div=f,e.dist=y,e.sqrDist=E,e.len=x,e.sqrLen=_,e.forEach=function(){var t=n();return function(e,r,n,i,a,o){var s=void 0,u=void 0;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t,e,r){"use strict";function n(t,e,r){void 0===r&&(r=!1),i=a.get();var n=i.createBuffer(),o=r?i.DYNAMIC_DRAW:i.STATIC_DRAW,s=t===i.ARRAY_BUFFER?Float32Array:Uint16Array;return i.bindBuffer(t,n),i.bufferData(t,new s(e),o),i.bindBuffer(t,null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.createBuffer=n;var i,a=r(0);i=a.get()},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),r(7)),a=r(3),o=0,s=n.vec3.create(),u=function(){function t(){this.children=[],this.localMatrix=n.mat4.create(),this.modelMatrix=n.mat4.create(),this.modelViewMatrix=n.mat4.create(),this.matrixAutoUpdate=!0,this.position=new a.a,this.rotation=new a.a,this.scale=new a.a(1,1,1),this.isObject3D=!0,this.quaternion=n.quat.create(),this.quaternionLookAt=n.quat.create(),this.lookAtUp=n.vec3.create()}return t.prototype.updateMatrix=function(t){n.mat4.identity(this.modelViewMatrix),this.matrixAutoUpdate&&(n.mat4.identity(this.localMatrix),n.mat4.identity(this.modelMatrix),n.quat.identity(this.quaternion),this.parent&&(n.mat4.copy(this.localMatrix,this.parent.modelMatrix),n.mat4.multiply(this.modelMatrix,this.modelMatrix,this.localMatrix)),n.quat.copy(this.quaternion,this.quaternionLookAt),n.mat4.translate(this.modelMatrix,this.modelMatrix,this.position.v),n.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),n.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),n.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),o=n.quat.getAxisAngle(s,this.quaternion),n.mat4.rotate(this.modelMatrix,this.modelMatrix,o,s),n.mat4.scale(this.modelMatrix,this.modelMatrix,this.scale.v)),t&&n.mat4.multiply(this.modelViewMatrix,t.worldInverseMatrix,this.modelMatrix)},t.prototype.lookAt=function(t){n.quat.identity(this.quaternionLookAt),this.quaternionLookAt=Object(i.lookAt)(this.position.v,t.v,this.lookAtUp)},t.prototype.setParent=function(t){this.unsetParent(),t.isObject3D&&(t.children.push(this),this.parent=t)},t.prototype.unsetParent=function(){if(void 0!==this.parent){var t=this.parent.children.indexOf(this);-1!==t&&(this.parent.children.splice(t,1),this.parent=void 0)}},t.prototype.dispose=function(){this.unsetParent(),this.children=[],this.localMatrix=void 0,this.modelMatrix=void 0,this.position=void 0,this.rotation=void 0,this.scale=void 0,this.quaternion=void 0,this.isObject3D=void 0},t}();e.a=u},function(t,e,r){"use strict";var n,i=r(4),a=r(0),o=function(){function t(){n=a.get(),i.extensions.vertexArrayObjectExtension&&(this.vertexArrayObject=i.extensions.vertexArrayObjectExtension.createVertexArrayOES())}return t.prototype.bind=function(){i.extensions.vertexArrayObjectExtension&&i.extensions.vertexArrayObjectExtension.bindVertexArrayOES(this.vertexArrayObject)},t.prototype.unbind=function(){i.extensions.vertexArrayObjectExtension&&i.extensions.vertexArrayObjectExtension.bindVertexArrayOES(null)},t.prototype.dispose=function(){i.extensions.vertexArrayObjectExtension&&i.extensions.vertexArrayObjectExtension.deleteVertexArrayOES(this.vertexArrayObject),this.vertexArrayObject=void 0},t}();e.a=o},function(t,e,r){"use strict";function n(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){r("Failed to load: "+t)},n.src=t})}e.a=n},function(t,e,r){"use strict";var n,i=r(0),a=r(15),o=function(){function t(t,e,r,n){void 0===n&&(n=!0),this.type=t,this.itemSize=r,this.numItems=e.length/r,this.buffer=Object(a.createBuffer)(t,e),this.shaderAttribute=n}return t.prototype.bind=function(){n=i.get(),n.bindBuffer(this.type,this.buffer)},t.prototype.unbind=function(){n=i.get(),n.bindBuffer(this.type,null)},t.prototype.update=function(t){this.bind(),n=i.get(),n.bufferSubData(this.type,0,t),this.unbind()},t.prototype.dispose=function(){n=i.get(),n.deleteBuffer(this.buffer),this.buffer=void 0},t}();e.a=o},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),function(){function t(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.v=n.vec2.create(),this.set(t,e),this}return Object.defineProperty(t.prototype,"x",{get:function(){return this.v[0]},set:function(t){this.v[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.v[1]},set:function(t){this.v[1]=t},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){return n.vec2.set(this.v,t,e),this},t.prototype.clone=function(){return new t(this.v[0],this.v[1])},t.prototype.copy=function(t){return n.vec2.copy(this.v,t.v),this},t.prototype.add=function(t){return n.vec2.add(this.v,this.v,t.v),this},t.prototype.subtract=function(t){return n.vec2.subtract(this.v,this.v,t.v),this},t.prototype.subtractVectors=function(t,e){var r=n.vec2.create();return n.vec2.subtract(r,t.v,e.v),r},t.prototype.scale=function(t){return n.vec2.scale(this.v,this.v,t),this},t.prototype.distance=function(t){return n.vec2.distance(this.v,t.v)},t.prototype.length=function(){return n.vec2.length(this.v)},t.prototype.negate=function(){return n.vec2.negate(this.v,this.v),this},t.prototype.normalize=function(){return n.vec2.normalize(this.v,this.v),this},t.prototype.lerp=function(t,e){return n.vec2.lerp(this.v,this.v,t.v,e),this},t.prototype.equals=function(t){return n.vec2.equals(this.v,t.v)},t.prototype.multiply=function(t){return this.v[0]*=t.v[0],this.v[1]*=t.v[1],this},t.prototype.fromArray=function(t){return n.vec2.copy(this.v,t)},t}());e.a=i},function(t,e,r){"use strict";function n(t,e){return new Promise(function(r,n){var i=new XMLHttpRequest;i.responseType=e||"",i.onreadystatechange=function(){4===i.readyState&&(4===i.readyState&&200===i.status?r(i.response,i.status):n(i.status))},i.open("GET",t,!0),i.send()})}e.a=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8);r.d(e,"Camera",function(){return n.a});var i=r(28);r.d(e,"OrthographicCamera",function(){return i.a});var a=r(29);r.d(e,"PerspectiveCamera",function(){return a.a});var o=r(4);r.d(e,"Capabilities",function(){return o});var s=r(0);r.d(e,"Context",function(){return s});var u=r(5);r.d(e,"CoreConstants",function(){return u});var c=r(15);r.d(e,"CoreUtilities",function(){return c});var h=r(30);r.d(e,"Framebuffer",function(){return h.a});var f=r(9);r.d(e,"Material",function(){return f.a});var l=r(10);r.d(e,"Mesh",function(){return l.a});var v=r(16);r.d(e,"Object3D",function(){return v.a});var d=r(35);r.d(e,"Renderer",function(){return d.a});var p=r(37);r.d(e,"Scene",function(){return p.a});var m=r(38);r.d(e,"Texture2D",function(){return m.a});var M=r(17);r.d(e,"VertexArrayObject",function(){return M.a});var b=r(40);r.d(e,"OrbitalControls",function(){return b.a});var y=r(19);r.d(e,"BufferAttribute",function(){return y.a});var E=r(11);r.d(e,"Geometry",function(){return E.a});var x=r(44);r.d(e,"AxisHelper",function(){return x.a});var _=r(45);r.d(e,"GridHelper",function(){return _.a});var A=r(21);r.d(e,"FileLoader",function(){return A.a});var g=r(18);r.d(e,"ImageLoader",function(){return g.a});var R=r(46);r.d(e,"OBJLoader",function(){return R.a});var O=r(7);r.d(e,"Utilities",function(){return O});var w=r(20);r.d(e,"Vector2",function(){return w.a});var T=r(3);r.d(e,"Vector3",function(){return T.a})},function(t,e,r){"use strict";function n(){var t=new T.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function i(t){var e=new T.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,r,n){var i=new T.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function u(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function c(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function h(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null}function f(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function l(t){return t[0]*t[3]-t[2]*t[1]}function v(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],h=r[3];return t[0]=n*s+a*u,t[1]=i*s+o*u,t[2]=n*c+a*h,t[3]=i*c+o*h,t}function d(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t}function p(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*s,t[2]=a*u,t[3]=o*u,t}function m(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function M(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function b(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function E(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function x(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function _(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function g(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-o)<=T.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=T.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=T.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}function R(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function O(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=i,e.copy=a,e.identity=o,e.fromValues=s,e.set=u,e.transpose=c,e.invert=h,e.adjoint=f,e.determinant=l,e.multiply=v,e.rotate=d,e.scale=p,e.fromRotation=m,e.fromScaling=M,e.str=b,e.frob=y,e.LDU=E,e.add=x,e.subtract=_,e.exactEquals=A,e.equals=g,e.multiplyScalar=R,e.multiplyScalarAndAdd=O;var w=r(2),T=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(w);e.mul=v,e.sub=_},function(t,e,r){"use strict";function n(){var t=new w.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function i(t){var e=new w.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e,r,n,i,a){var o=new w.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o}function u(t,e,r,n,i,a,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t}function c(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=r*a-n*i;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-a*o)*u,t[5]=(n*o-r*s)*u,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function f(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=r[0],h=r[1],f=r[2],l=r[3],v=r[4],d=r[5];return t[0]=n*c+a*h,t[1]=i*c+o*h,t[2]=n*f+a*l,t[3]=i*f+o*l,t[4]=n*v+a*d+s,t[5]=i*v+o*d+u,t}function l(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=Math.sin(r),h=Math.cos(r);return t[0]=n*h+a*c,t[1]=i*h+o*c,t[2]=n*-c+a*h,t[3]=i*-c+o*h,t[4]=s,t[5]=u,t}function v(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=r[0],h=r[1];return t[0]=n*c,t[1]=i*c,t[2]=a*h,t[3]=o*h,t[4]=s,t[5]=u,t}function d(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=r[0],h=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*c+a*h+s,t[5]=i*c+o*h+u,t}function p(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function m(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function b(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function E(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function x(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function _(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function A(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function g(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function R(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=e[0],c=e[1],h=e[2],f=e[3],l=e[4],v=e[5];return Math.abs(r-u)<=w.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=w.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-h)<=w.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-f)<=w.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-l)<=w.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-v)<=w.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=i,e.copy=a,e.identity=o,e.fromValues=s,e.set=u,e.invert=c,e.determinant=h,e.multiply=f,e.rotate=l,e.scale=v,e.translate=d,e.fromRotation=p,e.fromScaling=m,e.fromTranslation=M,e.str=b,e.frob=y,e.add=E,e.subtract=x,e.multiplyScalar=_,e.multiplyScalarAndAdd=A,e.exactEquals=g,e.equals=R;var O=r(2),w=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(O);e.mul=f,e.sub=x},function(t,e,r){"use strict";function n(){var t=new K.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i(t){var e=new K.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,r,n,i,a,o,s,u,c,h,f,l,v,d,p){var m=new K.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=a,m[6]=o,m[7]=s,m[8]=u,m[9]=c,m[10]=h,m[11]=f,m[12]=l,m[13]=v,m[14]=d,m[15]=p,m}function s(t,e,r,n,i,a,o,s,u,c,h,f,l,v,d,p,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=h,t[10]=f,t[11]=l,t[12]=v,t[13]=d,t[14]=p,t[15]=m,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],v=e[11],d=e[12],p=e[13],m=e[14],M=e[15],b=r*s-n*o,y=r*u-i*o,E=r*c-a*o,x=n*u-i*s,_=n*c-a*s,A=i*c-a*u,g=h*p-f*d,R=h*m-l*d,O=h*M-v*d,w=f*m-l*p,T=f*M-v*p,I=l*M-v*m,S=b*I-y*T+E*w+x*O-_*R+A*g;return S?(S=1/S,t[0]=(s*I-u*T+c*w)*S,t[1]=(i*T-n*I-a*w)*S,t[2]=(p*A-m*_+M*x)*S,t[3]=(l*_-f*A-v*x)*S,t[4]=(u*O-o*I-c*R)*S,t[5]=(r*I-i*O+a*R)*S,t[6]=(m*E-d*A-M*y)*S,t[7]=(h*A-l*E+v*y)*S,t[8]=(o*T-s*O+c*g)*S,t[9]=(n*O-r*T-a*g)*S,t[10]=(d*_-p*E+M*b)*S,t[11]=(f*E-h*_-v*b)*S,t[12]=(s*R-o*w-u*g)*S,t[13]=(r*w-n*R+i*g)*S,t[14]=(p*y-d*x-m*b)*S,t[15]=(h*x-f*y+l*b)*S,t):null}function f(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],v=e[11],d=e[12],p=e[13],m=e[14],M=e[15];return t[0]=s*(l*M-v*m)-f*(u*M-c*m)+p*(u*v-c*l),t[1]=-(n*(l*M-v*m)-f*(i*M-a*m)+p*(i*v-a*l)),t[2]=n*(u*M-c*m)-s*(i*M-a*m)+p*(i*c-a*u),t[3]=-(n*(u*v-c*l)-s*(i*v-a*l)+f*(i*c-a*u)),t[4]=-(o*(l*M-v*m)-h*(u*M-c*m)+d*(u*v-c*l)),t[5]=r*(l*M-v*m)-h*(i*M-a*m)+d*(i*v-a*l),t[6]=-(r*(u*M-c*m)-o*(i*M-a*m)+d*(i*c-a*u)),t[7]=r*(u*v-c*l)-o*(i*v-a*l)+h*(i*c-a*u),t[8]=o*(f*M-v*p)-h*(s*M-c*p)+d*(s*v-c*f),t[9]=-(r*(f*M-v*p)-h*(n*M-a*p)+d*(n*v-a*f)),t[10]=r*(s*M-c*p)-o*(n*M-a*p)+d*(n*c-a*s),t[11]=-(r*(s*v-c*f)-o*(n*v-a*f)+h*(n*c-a*s)),t[12]=-(o*(f*m-l*p)-h*(s*m-u*p)+d*(s*l-u*f)),t[13]=r*(f*m-l*p)-h*(n*m-i*p)+d*(n*l-i*f),t[14]=-(r*(s*m-u*p)-o*(n*m-i*p)+d*(n*u-i*s)),t[15]=r*(s*l-u*f)-o*(n*l-i*f)+h*(n*u-i*s),t}function l(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],h=t[9],f=t[10],l=t[11],v=t[12],d=t[13],p=t[14],m=t[15];return(e*o-r*a)*(f*m-l*p)-(e*s-n*a)*(h*m-l*d)+(e*u-i*a)*(h*p-f*d)+(r*s-n*o)*(c*m-l*v)-(r*u-i*o)*(c*p-f*v)+(n*u-i*s)*(c*d-h*v)}function v(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=e[9],v=e[10],d=e[11],p=e[12],m=e[13],M=e[14],b=e[15],y=r[0],E=r[1],x=r[2],_=r[3];return t[0]=y*n+E*s+x*f+_*p,t[1]=y*i+E*u+x*l+_*m,t[2]=y*a+E*c+x*v+_*M,t[3]=y*o+E*h+x*d+_*b,y=r[4],E=r[5],x=r[6],_=r[7],t[4]=y*n+E*s+x*f+_*p,t[5]=y*i+E*u+x*l+_*m,t[6]=y*a+E*c+x*v+_*M,t[7]=y*o+E*h+x*d+_*b,y=r[8],E=r[9],x=r[10],_=r[11],t[8]=y*n+E*s+x*f+_*p,t[9]=y*i+E*u+x*l+_*m,t[10]=y*a+E*c+x*v+_*M,t[11]=y*o+E*h+x*d+_*b,y=r[12],E=r[13],x=r[14],_=r[15],t[12]=y*n+E*s+x*f+_*p,t[13]=y*i+E*u+x*l+_*m,t[14]=y*a+E*c+x*v+_*M,t[15]=y*o+E*h+x*d+_*b,t}function d(t,e,r){var n=r[0],i=r[1],a=r[2],o=void 0,s=void 0,u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,v=void 0,d=void 0,p=void 0,m=void 0,M=void 0;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*a+e[12],t[13]=e[1]*n+e[5]*i+e[9]*a+e[13],t[14]=e[2]*n+e[6]*i+e[10]*a+e[14],t[15]=e[3]*n+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],u=e[2],c=e[3],h=e[4],f=e[5],l=e[6],v=e[7],d=e[8],p=e[9],m=e[10],M=e[11],t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=h,t[5]=f,t[6]=l,t[7]=v,t[8]=d,t[9]=p,t[10]=m,t[11]=M,t[12]=o*n+h*i+d*a+e[12],t[13]=s*n+f*i+p*a+e[13],t[14]=u*n+l*i+m*a+e[14],t[15]=c*n+v*i+M*a+e[15]),t}function p(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(t,e,r,n){var i=n[0],a=n[1],o=n[2],s=Math.sqrt(i*i+a*a+o*o),u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,v=void 0,d=void 0,p=void 0,m=void 0,M=void 0,b=void 0,y=void 0,E=void 0,x=void 0,_=void 0,A=void 0,g=void 0,R=void 0,O=void 0,w=void 0,T=void 0,I=void 0,S=void 0,P=void 0;return Math.abs(s)<K.EPSILON?null:(s=1/s,i*=s,a*=s,o*=s,u=Math.sin(r),c=Math.cos(r),h=1-c,f=e[0],l=e[1],v=e[2],d=e[3],p=e[4],m=e[5],M=e[6],b=e[7],y=e[8],E=e[9],x=e[10],_=e[11],A=i*i*h+c,g=a*i*h+o*u,R=o*i*h-a*u,O=i*a*h-o*u,w=a*a*h+c,T=o*a*h+i*u,I=i*o*h+a*u,S=a*o*h-i*u,P=o*o*h+c,t[0]=f*A+p*g+y*R,t[1]=l*A+m*g+E*R,t[2]=v*A+M*g+x*R,t[3]=d*A+b*g+_*R,t[4]=f*O+p*w+y*T,t[5]=l*O+m*w+E*T,t[6]=v*O+M*w+x*T,t[7]=d*O+b*w+_*T,t[8]=f*I+p*S+y*P,t[9]=l*I+m*S+E*P,t[10]=v*I+M*S+x*P,t[11]=d*I+b*S+_*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function M(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],h=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+h*n,t[6]=s*i+f*n,t[7]=u*i+l*n,t[8]=c*i-a*n,t[9]=h*i-o*n,t[10]=f*i-s*n,t[11]=l*i-u*n,t}function b(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[8],h=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-h*n,t[2]=s*i-f*n,t[3]=u*i-l*n,t[8]=a*n+c*i,t[9]=o*n+h*i,t[10]=s*n+f*i,t[11]=u*n+l*i,t}function y(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],h=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+h*n,t[2]=s*i+f*n,t[3]=u*i+l*n,t[4]=c*i-a*n,t[5]=h*i-o*n,t[6]=f*i-s*n,t[7]=l*i-u*n,t}function E(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e,r){var n=r[0],i=r[1],a=r[2],o=Math.sqrt(n*n+i*i+a*a),s=void 0,u=void 0,c=void 0;return Math.abs(o)<K.EPSILON?null:(o=1/o,n*=o,i*=o,a*=o,s=Math.sin(e),u=Math.cos(e),c=1-u,t[0]=n*n*c+u,t[1]=i*n*c+a*s,t[2]=a*n*c-i*s,t[3]=0,t[4]=n*i*c-a*s,t[5]=i*i*c+u,t[6]=a*i*c+n*s,t[7]=0,t[8]=n*a*c+i*s,t[9]=i*a*c-n*s,t[10]=a*a*c+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function A(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,u=i+i,c=a+a,h=n*s,f=n*u,l=n*c,v=i*u,d=i*c,p=a*c,m=o*s,M=o*u,b=o*c;return t[0]=1-(v+p),t[1]=f+b,t[2]=l-M,t[3]=0,t[4]=f-b,t[5]=1-(h+p),t[6]=d+m,t[7]=0,t[8]=l+M,t[9]=d-m,t[10]=1-(h+v),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function w(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function T(t,e){var r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],h=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(a*a+o*o+s*s),t[2]=Math.sqrt(u*u+c*c+h*h),t}function I(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function S(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,c=a+a,h=o+o,f=i*u,l=i*c,v=i*h,d=a*c,p=a*h,m=o*h,M=s*u,b=s*c,y=s*h,E=n[0],x=n[1],_=n[2];return t[0]=(1-(d+m))*E,t[1]=(l+y)*E,t[2]=(v-b)*E,t[3]=0,t[4]=(l-y)*x,t[5]=(1-(f+m))*x,t[6]=(p+M)*x,t[7]=0,t[8]=(v+b)*_,t[9]=(p-M)*_,t[10]=(1-(f+d))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function P(t,e,r,n,i){var a=e[0],o=e[1],s=e[2],u=e[3],c=a+a,h=o+o,f=s+s,l=a*c,v=a*h,d=a*f,p=o*h,m=o*f,M=s*f,b=u*c,y=u*h,E=u*f,x=n[0],_=n[1],A=n[2],g=i[0],R=i[1],O=i[2];return t[0]=(1-(p+M))*x,t[1]=(v+E)*x,t[2]=(d-y)*x,t[3]=0,t[4]=(v-E)*_,t[5]=(1-(l+M))*_,t[6]=(m+b)*_,t[7]=0,t[8]=(d+y)*A,t[9]=(m-b)*A,t[10]=(1-(l+p))*A,t[11]=0,t[12]=r[0]+g-(t[0]*g+t[4]*R+t[8]*O),t[13]=r[1]+R-(t[1]*g+t[5]*R+t[9]*O),t[14]=r[2]+O-(t[2]*g+t[6]*R+t[10]*O),t[15]=1,t}function N(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,h=n*o,f=n*s,l=i*o,v=i*s,d=i*u,p=a*o,m=a*s,M=a*u;return t[0]=1-f-d,t[1]=h+M,t[2]=l-m,t[3]=0,t[4]=h-M,t[5]=1-c-d,t[6]=v+p,t[7]=0,t[8]=l+m,t[9]=v-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,r,n,i,a,o){var s=1/(r-e),u=1/(i-n),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function F(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t}function D(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function U(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*c,t[15]=1,t}function j(t,e,r,n){var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,v=void 0,d=e[0],p=e[1],m=e[2],M=n[0],b=n[1],y=n[2],E=r[0],x=r[1],_=r[2];return Math.abs(d-E)<K.EPSILON&&Math.abs(p-x)<K.EPSILON&&Math.abs(m-_)<K.EPSILON?mat4.identity(t):(h=d-E,f=p-x,l=m-_,v=1/Math.sqrt(h*h+f*f+l*l),h*=v,f*=v,l*=v,i=b*l-y*f,a=y*h-M*l,o=M*f-b*h,v=Math.sqrt(i*i+a*a+o*o),v?(v=1/v,i*=v,a*=v,o*=v):(i=0,a=0,o=0),s=f*o-l*a,u=l*i-h*o,c=h*a-f*i,v=Math.sqrt(s*s+u*u+c*c),v?(v=1/v,s*=v,u*=v,c*=v):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=a,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=l,t[11]=0,t[12]=-(i*d+a*p+o*m),t[13]=-(s*d+u*p+c*m),t[14]=-(h*d+f*p+l*m),t[15]=1,t)}function C(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=n[0],u=n[1],c=n[2],h=i-r[0],f=a-r[1],l=o-r[2],v=h*h+f*f+l*l;v>0&&(v=1/Math.sqrt(v),h*=v,f*=v,l*=v);var d=u*l-c*f,p=c*h-s*l,m=s*f-u*h;return t[0]=d,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-l*p,t[5]=l*d-h*m,t[6]=h*p-f*d,t[7]=0,t[8]=h,t[9]=f,t[10]=l,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function k(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function B(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function V(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function q(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function H(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function z(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=t[9],l=t[10],v=t[11],d=t[12],p=t[13],m=t[14],M=t[15],b=e[0],y=e[1],E=e[2],x=e[3],_=e[4],A=e[5],g=e[6],R=e[7],O=e[8],w=e[9],T=e[10],I=e[11],S=e[12],P=e[13],N=e[14],L=e[15];return Math.abs(r-b)<=K.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-y)<=K.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-E)<=K.EPSILON*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(a-x)<=K.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-_)<=K.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-A)<=K.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-g)<=K.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-R)<=K.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(h-O)<=K.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(f-w)<=K.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(l-T)<=K.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-I)<=K.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(d-S)<=K.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-P)<=K.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-N)<=K.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(M-L)<=K.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=i,e.copy=a,e.fromValues=o,e.set=s,e.identity=u,e.transpose=c,e.invert=h,e.adjoint=f,e.determinant=l,e.multiply=v,e.translate=d,e.scale=p,e.rotate=m,e.rotateX=M,e.rotateY=b,e.rotateZ=y,e.fromTranslation=E,e.fromScaling=x,e.fromRotation=_,e.fromXRotation=A,e.fromYRotation=g,e.fromZRotation=R,e.fromRotationTranslation=O,e.getTranslation=w,e.getScaling=T,e.getRotation=I,e.fromRotationTranslationScale=S,e.fromRotationTranslationScaleOrigin=P,e.fromQuat=N,e.frustum=L,e.perspective=F,e.perspectiveFromFieldOfView=D,e.ortho=U,e.lookAt=j,e.targetTo=C,e.str=k,e.frob=B,e.add=V,e.subtract=q,e.multiplyScalar=X,e.multiplyScalarAndAdd=H,e.exactEquals=Y,e.equals=z;var G=r(2),K=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(G);e.mul=v,e.sub=q},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(){var t=new E.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function s(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function u(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],h=r[3];return t[0]=n*h+o*s+i*c-a*u,t[1]=i*h+o*u+a*s-n*c,t[2]=a*h+o*c+n*u-i*s,t[3]=o*h-n*s-i*u-a*c,t}function c(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-n*s,t}function h(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-a*s,t[1]=i*u+o*s,t[2]=a*u+n*s,t[3]=o*u-i*s,t}function f(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function l(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function v(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],u=r[0],c=r[1],h=r[2],f=r[3],l=void 0,v=void 0,d=void 0,p=void 0,m=void 0;return v=i*u+a*c+o*h+s*f,v<0&&(v=-v,u=-u,c=-c,h=-h,f=-f),1-v>1e-6?(l=Math.acos(v),d=Math.sin(l),p=Math.sin((1-n)*l)/d,m=Math.sin(n*l)/d):(p=1-n,m=n),t[0]=p*i+m*u,t[1]=p*a+m*c,t[2]=p*o+m*h,t[3]=p*s+m*f,t}function d(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function m(t,e){var r=e[0]+e[4]+e[8],n=void 0;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function M(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(r),u=Math.cos(r),c=Math.sin(n),h=Math.cos(n);return t[0]=a*u*h-o*s*c,t[1]=o*s*h+a*u*c,t[2]=o*u*c-a*s*h,t[3]=o*u*h+a*s*c,t}function b(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=i,e.identity=a,e.setAxisAngle=o,e.getAxisAngle=s,e.multiply=u,e.rotateX=c,e.rotateY=h,e.rotateZ=f,e.calculateW=l,e.slerp=v,e.invert=d,e.conjugate=p,e.fromMat3=m,e.fromEuler=M,e.str=b;var y=r(2),E=n(y),x=r(12),_=n(x),A=r(13),g=n(A),R=r(14),O=n(R),w=(e.clone=O.clone,e.fromValues=O.fromValues,e.copy=O.copy,e.set=O.set,e.add=O.add,e.mul=u,e.scale=O.scale,e.dot=O.dot,e.lerp=O.lerp,e.length=O.length),T=(e.len=w,e.squaredLength=O.squaredLength),I=(e.sqrLen=T,e.normalize=O.normalize);e.exactEquals=O.exactEquals,e.equals=O.equals,e.rotationTo=function(){var t=g.create(),e=g.fromValues(1,0,0),r=g.fromValues(0,1,0);return function(n,i,a){var s=g.dot(i,a);return s<-.999999?(g.cross(t,e,i),g.len(t)<1e-6&&g.cross(t,r,i),g.normalize(t,t),o(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(g.cross(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,I(n,n))}}(),e.sqlerp=function(){var t=i(),e=i();return function(r,n,i,a,o,s){return v(t,n,o,s),v(e,i,a,s),v(r,t,e,2*s*(1-s)),r}}(),e.setAxes=function(){var t=_.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],I(e,m(e,t))}}()},function(t,e,r){"use strict";function n(){var t=new C.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t){var e=new C.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var r=new C.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r}function o(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,r){return t[0]=e,t[1]=r,t}function u(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function c(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function h(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function f(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function l(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function p(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function M(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function b(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function y(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function E(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function x(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function _(t){var e=t[0],r=t[1];return e*e+r*r}function A(t,e){return t[0]=-e[0],t[1]=-e[1],t}function g(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function R(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function O(t,e){return t[0]*e[0]+t[1]*e[1]}function w(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function T(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t}function I(t,e){e=e||1;var r=2*C.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function S(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function P(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function N(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function L(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function F(t){return"vec2("+t[0]+", "+t[1]+")"}function D(t,e){return t[0]===e[0]&&t[1]===e[1]}function U(t,e){var r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=C.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=C.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=n,e.clone=i,e.fromValues=a,e.copy=o,e.set=s,e.add=u,e.subtract=c,e.multiply=h,e.divide=f,e.ceil=l,e.floor=v,e.min=d,e.max=p,e.round=m,e.scale=M,e.scaleAndAdd=b,e.distance=y,e.squaredDistance=E,e.length=x,e.squaredLength=_,e.negate=A,e.inverse=g,e.normalize=R,e.dot=O,e.cross=w,e.lerp=T,e.random=I,e.transformMat2=S,e.transformMat2d=P,e.transformMat3=N,e.transformMat4=L,e.str=F,e.exactEquals=D,e.equals=U;var j=r(2),C=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(j);e.len=x,e.sub=c,e.mul=h,e.div=f,e.dist=y,e.sqrDist=E,e.sqrLen=_,e.forEach=function(){var t=n();return function(e,r,n,i,a,o){var s=void 0,u=void 0;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),r(8)),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(t){function e(e){void 0===e&&(e={});var r=t.call(this,e)||this;return r.left=e.left||-1,r.right=e.right||1,r.bottom=e.bottom||-1,r.top=e.top||1,r.isOrthographicCamera=!0,r}return a(e,t),e.prototype.updateProjectionMatrix=function(){n.mat4.ortho(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far)},e}(i.a);e.a=o},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),r(8)),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(t){function e(e){var r=t.call(this,e)||this;return r.isPespectiveCamera=!0,r}return a(e,t),e.prototype.updateProjectionMatrix=function(){n.mat4.perspective(this.projectionMatrix,this.fieldOfView,this.aspectRatio,this.near,this.far)},e}(i.a);e.a=o},function(t,e,r){"use strict";var n,i=r(0),a=function(){function t(t){this.pixelRatio=t.pixelRatio||1,this.width=t.width*this.pixelRatio,this.height=t.height*this.pixelRatio,this.ratio=this.width/this.height,this.viewport={x:0,y:0,width:this.width,height:this.height},this.autoClear=!0,this.clearColor={r:0,g:0,b:0,a:1},n=i.get(),this.frameBuffer=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer),this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),this.renderBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,this.width,this.height),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.renderBuffer),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null)}return t.prototype.setClearColor=function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),this.clearColor.r=t,this.clearColor.g=e,this.clearColor.b=r,this.clearColor.a=n},t.prototype.setSize=function(t,e){var r=t*this.pixelRatio,i=e*this.pixelRatio;r===this.width&&i===this.height||(this.width=t*this.pixelRatio,this.height=e*this.pixelRatio,this.ratio=this.width/this.height,n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,this.width,this.height),n.bindRenderbuffer(n.RENDERBUFFER,null),this.setViewport(0,0,t,e))},t.prototype.setScissorTest=function(t){void 0===t&&(t=!1),n=i.get(),t?n.enable(n.SCISSOR_TEST):n.disable(n.SCISSOR_TEST)},t.prototype.setScissor=function(t,e,r,a){n=i.get(),n.scissor(t*this.pixelRatio,e*this.pixelRatio,r*this.pixelRatio,a*this.pixelRatio)},t.prototype.setViewport=function(t,e,r,n){this.viewport.x=t*this.pixelRatio,this.viewport.y=e*this.pixelRatio,this.viewport.width=r*this.pixelRatio,this.viewport.height=n*this.pixelRatio},t.prototype.render=function(t,e){n=i.get(),n.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer),this.autoClear&&(n.clearColor(this.clearColor.r,this.clearColor.g,this.clearColor.b,this.clearColor.a),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)),t.update(),t.objects.forEach(function(t){t.isInstanced?t.drawInstance(e):t.draw(e)}),n.bindTexture(n.TEXTURE_2D,this.texture),n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)},t}();e.a=a},function(t,e,r){"use strict";var n,i=r(0),a=r(6),o=function(t){for(var e=t.split("\n"),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")},s=function(){function t(){n=i.get(),this.program=n.createProgram(),this.created=!1,this.attributeLocations={}}return t.prototype.link=function(t,e){if(this.compiledVertexShader=this.compile("vertex",t),this.compiledFragmentShader=this.compile("fragment",e),this.compiledVertexShader&&this.compiledFragmentShader){if(n.attachShader(this.program,this.compiledVertexShader),n.attachShader(this.program,this.compiledFragmentShader),n.linkProgram(this.program),n.validateProgram(this.program),!n.getProgramParameter(this.program,n.LINK_STATUS)){var r=n.getProgramInfoLog(this.program);Object(a.b)("Failed to initialise shaders: "+r)}this.created=!0}},t.prototype.compile=function(t,e){n=i.get();var r;switch(t){case"vertex":r=n.createShader(n.VERTEX_SHADER);break;case"fragment":r=n.createShader(n.FRAGMENT_SHADER)}return n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?r:(Object(a.b)("Failed to compile shader: "+n.getShaderInfoLog(r)),Object(a.a)(o(e)),!1)},t.prototype.setAttributeLocation=function(t){this.created&&(n=i.get(),this.attributeLocations[t]=n.getAttribLocation(this.program,t),n.enableVertexAttribArray(this.attributeLocations[t]))},t.prototype.setAttributePointer=function(t,e){n=i.get(),n.vertexAttribPointer(this.attributeLocations[t],e,n.FLOAT,!1,0,0)},t.prototype.setAttributeInstancedPointer=function(t,e){n=i.get(),n.vertexAttribPointer(this.attributeLocations[t],e,n.FLOAT,!1,0,0)},t.prototype.setUniformLocation=function(t,e){this.created&&(n=i.get(),t[e].location=n.getUniformLocation(this.program,e))},t.prototype.bind=function(){n=i.get(),n.useProgram(this.program)},t.prototype.dispose=function(){var t=this;n=i.get();var e;Object.keys(this.attributeLocations).forEach(function(r){e=t.attributeLocations[r],n.disableVertexAttribArray(e)}),n.detachShader(this.program,this.compiledVertexShader),n.detachShader(this.program,this.compiledFragmentShader),n.deleteProgram(this.program)},t}();e.a=s},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n="\n    <HOOK_NAME>\n\n    <HOOK_PRECISION>\n    <HOOK_DEFINES>\n\n    // Color\n    varying vec3 vDiffuse;\n\n    // Position\n    varying vec3 vPosition;\n\n    // Normal\n    #ifdef HAS_NORMALS\n    varying vec3 vNormal;\n    #endif\n\n    // Uv\n    #ifdef HAS_UVS\n    varying vec2 vUv;\n    #endif\n\n    <HOOK_FRAGMENT_PRE>\n\n    void main() {\n        vec3 color = vDiffuse;\n\n        #ifdef HAS_NORMALS\n        vec3 normal = normalize(vNormal);\n        #endif\n\n        <HOOK_FRAGMENT_MAIN>\n\n        gl_FragColor = vec4(color.rgb, 1.0);\n\n        <HOOK_FRAGMENT_END>\n    }\n"},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n="\n    <HOOK_NAME>\n\n    <HOOK_PRECISION>\n    <HOOK_DEFINES>\n\n    // Position\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uModelMatrix;\n    uniform mat3 uNormalMatrix;\n    attribute vec3 aVertexPosition;\n    varying vec3 vPosition;\n    varying vec4 vWorldPosition;\n\n    // Camera\n    uniform vec3 uCameraPosition;\n\n    #ifdef HAS_VERTEX_COLORS\n    attribute vec3 aVertexColor;\n    #endif\n\n    // Color\n    uniform vec3 uDiffuse;\n    varying vec3 vDiffuse;\n\n    // Normal\n    #ifdef HAS_NORMALS\n    attribute vec3 aVertexNormal;\n    varying vec3 vNormal;\n    #endif\n\n    // Uv\n    #ifdef HAS_UVS\n    attribute vec2 aUv;\n    varying vec2 vUv;\n    #endif\n\n    <HOOK_VERTEX_PRE>\n\n    void main() {\n        vDiffuse = uDiffuse;\n\n        // Override for custom positioning\n        vec3 transformed = vec3(0.0);\n\n        #ifdef HAS_VERTEX_COLORS\n        vDiffuse = aVertexColor;\n        #endif\n\n        #ifdef HAS_UVS\n        vUv = aUv;\n        #endif\n\n        <HOOK_VERTEX_MAIN>\n\n        #ifdef HAS_NORMALS\n        vNormal = uNormalMatrix * aVertexNormal;\n        #endif\n\n        // Vertex position + offset\n        vPosition = aVertexPosition + transformed;\n\n        // Calculate world position of vertex with transformed\n        vWorldPosition = uModelMatrix * vec4(aVertexPosition + transformed, 1.0);\n\n        gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(vPosition, 1.0);\n\n        <HOOK_VERTEX_END>\n    }\n"},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n="\n    <HOOK_NAME>\n\n    <HOOK_PRECISION>\n    <HOOK_DEFINES>\n\n    // Color\n    varying vec3 vDiffuse;\n\n    // Position\n    varying vec3 vPosition;\n\n    // Normal\n    #ifdef HAS_NORMALS\n    varying vec3 vNormal;\n    #endif\n\n    // Uv\n    #ifdef HAS_UVS\n    varying vec2 vUv;\n    #endif\n\n    <HOOK_FRAGMENT_PRE>\n\n    void main() {\n        vec3 color = vDiffuse;\n\n        #ifdef HAS_NORMALS\n        vec3 normal = normalize(vNormal);\n        #endif\n\n        <HOOK_FRAGMENT_MAIN>\n\n        gl_FragColor = vec4(color.rgb * normal * 0.5 + 0.5, 1.0);\n\n        <HOOK_FRAGMENT_END>\n    }\n"},function(t,e,r){"use strict";var n,i=r(4),a=r(0),o=r(5),s=r(6),u=r(36),c=function(){function t(t){this.width=o.RENDERER_DEFAULT_WIDTH,this.height=o.RENDERER_DEFAULT_HEIGHT,this.aspectRatio=o.RENDERER_DEFAULT_ASPECT_RATIO,this.alpha=!1,this.antialias=!1,this.depth=!1,this.failIfMajorPerformanceCaveat=!1,this.premultipliedAlpha=!0,this.preserveDrawingBuffer=!1,this.powerPreference="default",this.stencil=!1,this.pixelRatio=Math.min(window.devicePixelRatio,o.MAX_DEVICE_PIXEL_RATIO),this.autoClear=!0,this.clearColor={r:0,g:0,b:0,a:1},Object.assign(this,t),this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height;var e={alpha:this.alpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer,powerPreference:this.powerPreference,stencil:this.stencil};if(!Object(u.a)())return void Object(s.b)("WebGL is not supported");var r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e);a.set(r),n=a.get(),i.set(n),this.viewport={x:0,y:0,width:n.drawingBufferWidth,height:n.drawingBufferHeight},this.setClearColor(),n.enable(n.DEPTH_TEST)}return t.prototype.setClearColor=function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),this.clearColor.r=t,this.clearColor.g=e,this.clearColor.b=r,this.clearColor.a=n},t.prototype.setSize=function(t,e){var r=t*this.pixelRatio,n=e*this.pixelRatio;r===this.width&&n===this.height||(this.width=t*this.pixelRatio,this.height=e*this.pixelRatio,this.aspectRatio=this.width/this.height,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.setViewport(0,0,t,e))},t.prototype.setDevicePixelRatio=function(t){void 0===t&&(t=1),this.pixelRatio=Math.min(t,o.MAX_DEVICE_PIXEL_RATIO)||1,this.setSize(this.width,this.height)},t.prototype.setScissorTest=function(t){void 0===t&&(t=!1),t?n.enable(n.SCISSOR_TEST):n.disable(n.SCISSOR_TEST)},t.prototype.setScissor=function(t,e,r,i){n.scissor(t*this.pixelRatio,e*this.pixelRatio,r*this.pixelRatio,i*this.pixelRatio)},t.prototype.setViewport=function(t,e,r,n){this.viewport.x=t*this.pixelRatio,this.viewport.y=e*this.pixelRatio,this.viewport.width=r*this.pixelRatio,this.viewport.height=n*this.pixelRatio},t.prototype.render=function(t,e){n=a.get(),n.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height),n.clearColor(this.clearColor.r,this.clearColor.g,this.clearColor.b,this.clearColor.a),this.autoClear&&n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t.update(),t.objects.forEach(function(t){t.isInstanced?t.drawInstance(e):t.draw(e)})},t}();e.a=c},function(t,e,r){"use strict";e.a=function(){try{var t=WebGLRenderingContext,e=document.createElement("canvas"),r=e.getContext("webgl")||e.getContext("experimental-webgl");return void 0!==t&&{webgl:!!r}}catch(t){return!1}}},function(t,e,r){"use strict";var n=function(){function t(){this.objects=[]}return t.prototype.add=function(t){this.objects.push(t)},t.prototype.remove=function(t,e){void 0===e&&(e=!1);var r=this.objects.indexOf(t);-1!==r&&(this.objects.splice(r,1),e&&(t.dispose(),t=void 0))},t.prototype.update=function(){},t}();e.a=n},function(t,e,r){"use strict";var n,i=r(0),a=r(18),o=r(39),s=r(6),u=function(){function t(t){var e=this;this.onTextureLoaded=function(t){e.image=t,e.update(e.image)},this.onTextureError=function(t){Object(s.b)(t)},n=i.get(),this.src=void 0,this.magFilter=n.NEAREST,this.minFilter=n.NEAREST,this.wrapS=n.CLAMP_TO_EDGE,this.wrapT=n.CLAMP_TO_EDGE,Object.assign(this,t);var r=Object(o.a)(1,1).canvas;this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),n.bindTexture(n.TEXTURE_2D,null),this.src&&this.load(this.src)}return t.prototype.load=function(t){Object(a.a)(t).then(this.onTextureLoaded).catch(this.onTextureError)},t.prototype.updateImage=function(t){this.src=t||this.src,this.load(this.src)},t.prototype.update=function(t){n=i.get(),n.bindTexture(n.TEXTURE_2D,this.texture),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.bindTexture(n.TEXTURE_2D,null)},t.prototype.dispose=function(){n=i.get(),n.deleteTexture(this.texture),this.texture=void 0},t}();e.a=u},function(t,e,r){"use strict";function n(t,e){void 0===t&&(t=1),void 0===e&&(e=1);var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t,r.height=e,{canvas:r,context:n}}e.a=n},function(t,e,r){"use strict";var n=r(41),i=r(7),a=r(3),o="onwheel"in window,s="onmousewheel"in window,u=new a.a(0,1,0),c=(n.a,function(){function t(t,e){this.camera=t,this.element=e,this.rotationSpeed=5,this.panSpeed=10,this.zoom=!0,this.pan=!0,this.easing=.1,this.zoomMin=.1,this.zoomMax=1/0,this.radius=Math.max(t.position.x,t.position.z),this.radiusOffset=0,this.defaultRadius=Math.max(t.position.x,t.position.z),this.rotationX=Math.atan2(t.position.y-0,this.radius-0),this.rotationY=Math.atan2(t.position.z-0,t.position.x-0),this.defaultRotationX=Math.atan2(t.position.y-0,this.radius-0),this.defaultRotationY=Math.atan2(t.position.z-0,t.position.x-0),this.x=Math.sin(this.rotationY)*(this.radius*Math.cos(this.rotationX)),this.y=this.radius*Math.sin(this.rotationX),this.z=Math.cos(this.rotationY)*(this.radius*Math.cos(this.rotationX)),this.offsetX=0,this.offsetY=0,this.offsetPanX=0,this.offsetPanY=0,this.target=new a.a,this.targetOffset=new a.a,this.direction=new a.a,this.width=window.innerWidth,this.height=window.innerHeight,this.addListeners()}return t.prototype.onKeypress=function(t){switch(t.which){case 114:case 82:this.reset()}},t.prototype.onWheel=function(t){if(this.zoom){var e=t.deltaY?t.deltaY:t.detail?t.detail:0,r=e/500;this.radius+=3*r,this.radius=Object(i.clamp)(this.radius,this.zoomMin,this.zoomMax),this.update()}},t.prototype.onContextMenu=function(t){t.preventDefault()},t.prototype.onDown=function(t){switch(t.which){case 3:this.mode="MODE_PAN",this.offsetX=this.target.x,this.offsetY=this.target.y;break;default:this.mode="MODE_DRAG",this.offsetX=this.rotationX,this.offsetY=this.rotationY}this.startX=t.pageY/this.height,this.startY=t.pageX/this.width,this.targetOffset.copy(this.target),this.radiusOffset=this.radius,this.isDown=!0},t.prototype.onMove=function(t){if(this.isDown){switch(this.mode){case"MODE_PAN":if(!this.pan)return;var e=t.pageY/this.height,r=t.pageX/this.width;this.direction.copy(this.camera.position).subtract(this.target).normalize();var a=this.direction.cross(u),o=this.targetOffset.x+-(this.startY-r)*this.panSpeed*a.x,s=this.targetOffset.y+-(this.startX-e)*this.panSpeed,c=this.targetOffset.z+-(this.startY-r)*this.panSpeed*a.z;this.target.set(o,s,c);break;default:var e=t.pageY/this.height,r=t.pageX/this.width;this.rotationX=this.offsetX+-(this.startX-e)*this.rotationSpeed,this.rotationY=this.offsetY+(this.startY-r)*this.rotationSpeed,this.rotationX=Object(i.clamp)(this.rotationX,-n.b,n.b)}this.update()}},t.prototype.onUp=function(t){this.isDown=!1},t.prototype.update=function(){var t=Math.sin(this.rotationY)*(this.radius*Math.cos(this.rotationX)),e=this.radius*Math.sin(this.rotationX),r=Math.cos(this.rotationY)*(this.radius*Math.cos(this.rotationX));this.x+=(t-this.x)*this.easing,this.y+=(e-this.y)*this.easing,this.z+=(r-this.z)*this.easing,Math.abs(this.x-t)<n.a&&(this.x=t),Math.abs(this.y-e)<n.a&&(this.y=e),Math.abs(this.z-r)<n.a&&(this.z=r),this.camera.position.set(this.x,this.y,this.z).add(this.target),this.camera.lookAt(this.target.x,this.target.y,this.target.z)},t.prototype.reset=function(){this.target.set(0,0,0),this.rotationX=this.defaultRotationX,this.rotationY=this.defaultRotationY,this.radius=this.defaultRadius,this.update()},t.prototype.addListeners=function(){var t=this;window.addEventListener("keypress",function(e){return t.onKeypress(e)},!1),this.element.addEventListener("contextmenu",function(e){return t.onContextMenu(e)},!1),o?window.addEventListener("wheel",function(e){return t.onWheel(e)}):s&&window.addEventListener("mousewheel",function(e){return t.onWheel(e)}),this.element.addEventListener("mousedown",function(e){return t.onDown(e)},!1),this.element.addEventListener("mousemove",function(e){return t.onMove(e)},!1),this.element.addEventListener("mouseup",function(e){return t.onUp(e)},!1)},t.prototype.dispose=function(){var t=this;window.removeEventListener("keypress",function(e){return t.onKeypress(e)}),this.element.removeEventListener("contextmenu",function(e){return t.onContextMenu(e)}),o?window.addEventListener("wheel",function(e){return t.onWheel(e)}):s&&window.addEventListener("mousewheel",function(e){return t.onWheel(e)}),this.element.removeEventListener("mousedown",function(e){return t.onDown(e)},!1),this.element.removeEventListener("mousemove",function(e){return t.onMove(e)},!1),this.element.removeEventListener("mouseup",function(e){return t.onUp(e)},!1),this.camera=void 0,this.element=void 0},t}());e.a=c},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return i});var n=1e-6,i=1.5707963267948966},function(t,e,r){"use strict";var n=r(1),i=(r.n(n),r(3)),a=n.vec3.create(),o=n.vec3.create(),s=function(){function t(t,e,r,n,a,o){this.indices=[t,e,r],this.vertices=[n,a,o],this.uvs=[t,e,r],this.normal=new i.a,this.updateFaceNormal()}return t.prototype.updateFaceNormal=function(){n.vec3.set(a,0,0,0),n.vec3.set(o,0,0,0),n.vec3.subtract(a,this.vertices[2].v,this.vertices[1].v),n.vec3.subtract(o,this.vertices[0].v,this.vertices[1].v),n.vec3.cross(a,a,o),n.vec3.normalize(a,a),this.normal.set(a[0],a[1],a[2])},t}();e.a=s},function(t,e,r){"use strict";function n(t){return t.reduce(function(t,e){return t.concat(e)},[])}e.a=n},function(t,e,r){"use strict";var n,i=r(4),a=r(0),o=r(9),s=r(10),u=r(11),c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h="\n    #define SHADER_NAME AxisHelper\n\n\tattribute vec3 aVertexPosition;\n\tattribute vec3 aVertexColor;\n\n    uniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\n    varying vec3 vColor;\n\n    void main(void){\n\t\tvColor = aVertexColor;\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n",f=function(){return"\n    #define SHADER_NAME AxisHelper\n\n    precision "+i.capabilities.precision+" float;\n\n    varying vec3 vColor;\n\n\tvoid main(void){\n\t\tgl_FragColor = vec4(vColor, 1.0);\n\t}\n"},l=function(t){function e(e){var r=[];r=r.concat([0,0,0,e,0,0]),r=r.concat([0,0,0,0,e,0]),r=r.concat([0,0,0,0,0,e]);var n=new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]);return t.call(this,new Float32Array(r),void 0,void 0,void 0,n)||this}return c(e,t),e}(u.a),v=function(t){function e(e){void 0===e&&(e=1);var r=h,n=f();return t.call(this,new l(e),new o.a({vertexShader:r,fragmentShader:n}))||this}return c(e,t),e.prototype.draw=function(t){this.visible&&(n=a.get(),this.updateMatrix(t),this.material.program.bind(),this.material.setUniforms(t.projectionMatrix,this.modelViewMatrix,this.modelMatrix,t),i.extensions.vertexArrayObjectExtension?this.vertexArrayObject.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),n.drawArrays(n.LINES,0,this.geometry.attributes.aVertexPosition.numItems),i.extensions.vertexArrayObjectExtension&&this.vertexArrayObject.unbind())},e}(s.a);e.a=v},function(t,e,r){"use strict";var n,i=r(4),a=r(0),o=r(9),s=r(10),u=r(11),c=r(7),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f="\n    #define SHADER_NAME GridHelper\n\n    attribute vec3 aVertexPosition;\n\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uModelViewMatrix;\n\n    void main() {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n    }\n",l=function(){return"\n    #define SHADER_NAME GridHelper\n\n    precision "+i.capabilities.precision+" float;\n\n    void main() {\n        gl_FragColor = vec4(vec3(0.5), 1.0);\n    }\n"},v=function(t){function e(e,r){for(var n=[],i=.5*e,a=0;a<r+1;a+=1){var o=Object(c.lerp)(-i,i,a/r),s=0,u=-i,h=Object(c.lerp)(-i,i,a/r),f=0,l=i;n=n.concat([o,s,u,h,f,l])}for(var a=0;a<r+1;a+=1){var o=-i,s=0,u=Object(c.lerp)(-i,i,a/r),h=i,f=0,l=Object(c.lerp)(-i,i,a/r);n=n.concat([o,s,u,h,f,l])}return t.call(this,new Float32Array(n))||this}return h(e,t),e}(u.a),d=function(t){function e(e,r){void 0===e&&(e=1),void 0===r&&(r=10);var n=f,i=l();return t.call(this,new v(e,r),new o.a({vertexShader:n,fragmentShader:i}))||this}return h(e,t),e.prototype.draw=function(t){this.visible&&(n=a.get(),this.updateMatrix(t),this.material.program.bind(),this.material.setUniforms(t.projectionMatrix,this.modelViewMatrix,this.modelMatrix,t),i.extensions.vertexArrayObjectExtension?this.vertexArrayObject.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),n.drawArrays(n.LINES,0,this.geometry.attributes.aVertexPosition.numItems),i.extensions.vertexArrayObjectExtension&&this.vertexArrayObject.unbind())},e}(s.a);e.a=d},function(t,e,r){"use strict";function n(t){return new Promise(function(e,r){Object(i.a)(t).then(function(t){var r=Object(a.a)(t);e(r)}).catch(function(t){r(t)})})}e.a=n;var i=r(21),a=r(47)},function(t,e,r){"use strict";function n(t){var e=new i.Mesh(t);return{vertices:new Float32Array(e.vertices),normals:new Float32Array(e.vertexNormals),indices:new Uint16Array(e.indices),uvs:new Float32Array(e.textures)}}e.a=n;var i=r(48);r.n(i)},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){switch(t){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}Object.defineProperty(e,"__esModule",{value:!0});var a=e.Layout=function t(){n(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];this.attributes=r;var a=0,s=0,u=!0,c=!1,h=void 0;try{for(var f,l=r[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var v=f.value;if(this[v.key])throw new o(v);a%v.sizeOfType!=0&&(a+=v.sizeOfType-a%v.sizeOfType),this[v.key]={attribute:v,size:v.size,type:v.type,normalized:v.normalized,offset:a},a+=v.sizeInBytes,s=Math.max(s,v.sizeOfType)}}catch(t){c=!0,h=t}finally{try{!u&&l.return&&l.return()}finally{if(c)throw h}}a%s!=0&&(a+=s-a%s),this.stride=a;var d=!0,p=!1,m=void 0;try{for(var M,b=r[Symbol.iterator]();!(d=(M=b.next()).done);d=!0)this[M.value.key].stride=this.stride}catch(t){p=!0,m=t}finally{try{!d&&b.return&&b.return()}finally{if(p)throw m}}},o=function t(e){n(this,t),this.message="found duplicate attribute: "+e.key},s=function t(e,r,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3],n(this,t),this.key=e,this.size=r,this.type=a,this.normalized=!1,this.sizeOfType=i(a),this.sizeInBytes=this.sizeOfType*r};a.POSITION=new s("position",3,"FLOAT"),a.NORMAL=new s("normal",3,"FLOAT"),a.TANGENT=new s("tangent",3,"FLOAT"),a.BITANGENT=new s("bitangent",3,"FLOAT"),a.UV=new s("uv",2,"FLOAT"),a.MATERIAL_INDEX=new s("materialIndex",1,"SHORT"),a.MATERIAL_ENABLED=new s("materialEnabled",1,"UNSIGNED_SHORT"),a.AMBIENT=new s("ambient",3,"FLOAT"),a.DIFFUSE=new s("diffuse",3,"FLOAT"),a.SPECULAR=new s("specular",3,"FLOAT"),a.SPECULAR_EXPONENT=new s("specularExponent",3,"FLOAT"),a.EMISSIVE=new s("emissive",3,"FLOAT"),a.TRANSMISSION_FILTER=new s("transmissionFilter",3,"FLOAT"),a.DISSOLVE=new s("dissolve",1,"FLOAT"),a.ILLUMINATION=new s("illumination",1,"UNSIGNED_SHORT"),a.REFRACTION_INDEX=new s("refractionIndex",1,"FLOAT"),a.SHARPNESS=new s("sharpness",1,"FLOAT"),a.MAP_DIFFUSE=new s("mapDiffuse",1,"SHORT"),a.MAP_AMBIENT=new s("mapAmbient",1,"SHORT"),a.MAP_SPECULAR=new s("mapSpecular",1,"SHORT"),a.MAP_SPECULAR_EXPONENT=new s("mapSpecularExponent",1,"SHORT"),a.MAP_DISSOLVE=new s("mapDissolve",1,"SHORT"),a.ANTI_ALIASING=new s("antiAliasing",1,"UNSIGNED_SHORT"),a.MAP_BUMP=new s("mapBump",1,"SHORT"),a.MAP_DISPLACEMENT=new s("mapDisplacement",1,"SHORT"),a.MAP_DECAL=new s("mapDecal",1,"SHORT"),a.MAP_EMISSIVE=new s("mapEmissive",1,"SHORT")},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),s=function(){function t(e,r){i(this,t),r=r||{},r.materials=r.materials||[];var a=this;a.has_materials=!!r.materials,a.materials={},a.vertices=[],a.vertexNormals=[],a.textures=[],a.indices=[],this.name="";var o=[],s=[],u=[],c={},h=[],f={},l=-1;c.verts=[],c.norms=[],c.textures=[],c.hashindices={},c.indices=[],c.materialIndices=[],c.index=0;for(var v=/^v\s/,d=/^vn\s/,p=/^vt\s/,m=/^f\s/,M=/\s+/,b=/^usemtl/,y=e.split("\n"),E=0;E<y.length;E++){var x=y[E].trim();if(x&&!x.startsWith("#")){var _=x.split(M);if(_.shift(),v.test(x))o.push.apply(o,n(_));else if(d.test(x))s.push.apply(s,n(_));else if(p.test(x))u.push.apply(u,n(_));else if(b.test(x)){var A=_[0];A in f||(h.push(A),f[A]=h.length-1),l=f[A]}else if(m.test(x))for(var g=!1,R=0,O=_.length;R<O;R++){3!==R||g||(R=2,g=!0);var w=_[0]+","+l,T=_[R]+","+l;if(T in c.hashindices)c.indices.push(c.hashindices[T]);else{var I=_[R].split("/"),S=I.length-1;c.verts.push(+o[3*(I[0]-1)+0]),c.verts.push(+o[3*(I[0]-1)+1]),c.verts.push(+o[3*(I[0]-1)+2]),u.length&&(c.textures.push(+u[2*(I[1]-1)+0]),c.textures.push(+u[2*(I[1]-1)+1])),c.norms.push(+s[3*(I[S]-1)+0]),c.norms.push(+s[3*(I[S]-1)+1]),c.norms.push(+s[3*(I[S]-1)+2]),c.materialIndices.push(l),c.hashindices[T]=c.index,c.indices.push(c.index),c.index+=1}3===R&&g&&c.indices.push(c.hashindices[w])}}}a.vertices=c.verts,a.vertexNormals=c.norms,a.textures=c.textures,a.vertexMaterialIndices=c.materialIndices,a.indices=c.indices,a.materialNames=h,a.materialIndices=f,a.materialsByIndex={}}return a(t,[{key:"makeBufferData",value:function(t){var e=this.vertices.length/3,r=new ArrayBuffer(t.stride*e);r.numItems=e;for(var n=new DataView(r),i=0,a=0;i<e;i++){a=i*t.stride;var s=!0,u=!1,c=void 0;try{for(var h,f=t.attributes[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var l=h.value,v=a+t[l.key].offset;switch(l.key){case o.Layout.POSITION.key:n.setFloat32(v,this.vertices[3*i],!0),n.setFloat32(v+4,this.vertices[3*i+1],!0),n.setFloat32(v+8,this.vertices[3*i+2],!0);break;case o.Layout.UV.key:n.setFloat32(v,this.textures[2*i],!0),n.setFloat32(v+4,this.vertices[2*i+1],!0);break;case o.Layout.NORMAL.key:n.setFloat32(v,this.vertexNormals[3*i],!0),n.setFloat32(v+4,this.vertexNormals[3*i+1],!0),n.setFloat32(v+8,this.vertexNormals[3*i+2],!0);break;case o.Layout.MATERIAL_INDEX.key:n.setInt16(v,this.vertexMaterialIndices[i],!0);break;case o.Layout.AMBIENT.key:var d=this.vertexMaterialIndices[i],p=this.materialsByIndex[d];if(!p)break;n.setFloat32(v,p.ambient[0],!0),n.setFloat32(v+4,p.ambient[1],!0),n.setFloat32(v+8,p.ambient[2],!0);break;case o.Layout.DIFFUSE.key:var m=this.vertexMaterialIndices[i],M=this.materialsByIndex[m];if(!M)break;n.setFloat32(v,M.diffuse[0],!0),n.setFloat32(v+4,M.diffuse[1],!0),n.setFloat32(v+8,M.diffuse[2],!0);break;case o.Layout.SPECULAR.key:var b=this.vertexMaterialIndices[i],y=this.materialsByIndex[b];if(!y)break;n.setFloat32(v,y.specular[0],!0),n.setFloat32(v+4,y.specular[1],!0),n.setFloat32(v+8,y.specular[2],!0);break;case o.Layout.SPECULAR_EXPONENT.key:var E=this.vertexMaterialIndices[i],x=this.materialsByIndex[E];if(!x)break;n.setFloat32(v,x.specularExponent,!0);break;case o.Layout.EMISSIVE.key:var _=this.vertexMaterialIndices[i],A=this.materialsByIndex[_];if(!A)break;n.setFloat32(v,A.emissive[0],!0),n.setFloat32(v+4,A.emissive[1],!0),n.setFloat32(v+8,A.emissive[2],!0);break;case o.Layout.TRANSMISSION_FILTER.key:var g=this.vertexMaterialIndices[i],R=this.materialsByIndex[g];if(!R)break;n.setFloat32(v,R.transmissionFilter[0],!0),n.setFloat32(v+4,R.transmissionFilter[1],!0),n.setFloat32(v+8,R.transmissionFilter[2],!0);break;case o.Layout.DISSOLVE.key:var O=this.vertexMaterialIndices[i],w=this.materialsByIndex[O];if(!w)break;n.setFloat32(v,w.dissolve,!0);break;case o.Layout.ILLUMINATION.key:var T=this.vertexMaterialIndices[i],I=this.materialsByIndex[T];if(!I)break;n.setInt16(v,I.illumination,!0);break;case o.Layout.REFRACTION_INDEX.key:var S=this.vertexMaterialIndices[i],P=this.materialsByIndex[S];if(!P)break;n.setFloat32(v,P.refractionIndex,!0);break;case o.Layout.SHARPNESS.key:var N=this.vertexMaterialIndices[i],L=this.materialsByIndex[N];if(!L)break;n.setFloat32(v,L.sharpness,!0);break;case o.Layout.ANTI_ALIASING.key:var F=this.vertexMaterialIndices[i],D=this.materialsByIndex[F];if(!D)break;n.setInt16(v,D.antiAliasing,!0)}}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}return r}},{key:"makeIndexBufferData",value:function(){var t=new Uint16Array(this.indices);return t.numItems=this.indices.length,t}},{key:"addMaterialLibrary",value:function(t){for(var e in t.materials)if(e in this.materialIndices){var r=t.materials[e],n=this.materialIndices[r.name];this.materialsByIndex[n]=r}}}]),t}();e.default=s},function(t,e,r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=e.Material=function t(e){i(this,t),this.name=e,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};e.MaterialLibrary=function(){function t(e){i(this,t),this.data=e,this.currentMaterial=null,this.materials={},this.parse()}return a(t,[{key:"parse_newmtl",value:function(t){var e=t[0];this.currentMaterial=new o(e),this.materials[e]=this.currentMaterial}},{key:"parseColor",value:function(t){if("spectral"!=t[0]&&"xyz"!=t[0]){if(3==t.length)return t.map(parseFloat);var e=parseFloat(t[0]);return[e,e,e]}}},{key:"parse_Ka",value:function(t){this.currentMaterial.ambient=this.parseColor(t)}},{key:"parse_Kd",value:function(t){this.currentMaterial.diffuse=this.parseColor(t)}},{key:"parse_Ks",value:function(t){this.currentMaterial.specular=this.parseColor(t)}},{key:"parse_Ke",value:function(t){this.currentMaterial.emissive=this.parseColor(t)}},{key:"parse_Tf",value:function(t){this.currentMaterial.transmissionFilter=this.parseColor(t)}},{key:"parse_d",value:function(t){this.currentMaterial.dissolve=parseFloat(t.pop())}},{key:"parse_illum",value:function(t){this.currentMaterial.illumination=parseInt(t[0])}},{key:"parse_Ni",value:function(t){this.currentMaterial.refractionIndex=parseFloat(t[0])}},{key:"parse_Ns",value:function(t){this.currentMaterial.specularExponent=parseInt(t[0])}},{key:"parse_sharpness",value:function(t){this.currentMaterial.sharpness=parseInt(t[0])}},{key:"parse_cc",value:function(t,e){e.colorCorrection="on"==t[0]}},{key:"parse_blendu",value:function(t,e){e.horizontalBlending="on"==t[0]}},{key:"parse_blendv",value:function(t,e){e.verticalBlending="on"==t[0]}},{key:"parse_boost",value:function(t,e){e.boostMipMapSharpness=parseFloat(t[0])}},{key:"parse_mm",value:function(t,e){e.modifyTextureMap.brightness=parseFloat(t[0]),e.modifyTextureMap.contrast=parseFloat(t[1])}},{key:"parse_ost",value:function(t,e,r){for(;t.length<3;)t.push(r);e.u=parseFloat(t[0]),e.v=parseFloat(t[1]),e.w=parseFloat(t[2])}},{key:"parse_o",value:function(t,e){this.parse_ost(t,e.offset,0)}},{key:"parse_s",value:function(t,e){this.parse_ost(t,e.scale,1)}},{key:"parse_t",value:function(t,e){this.parse_ost(t,e.turbulence,0)}},{key:"parse_texres",value:function(t,e){e.textureResolution=parseFloat(t[0])}},{key:"parse_clamp",value:function(t,e){e.clamp="on"==t[0]}},{key:"parse_bm",value:function(t,e){e.bumpMultiplier=parseFloat(t[0])}},{key:"parse_imfchan",value:function(t,e){e.imfChan=t[0]}},{key:"parse_type",value:function(t,e){e.reflectionType=t[0]}},{key:"parseOptions",value:function(t){var e={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},r=void 0,n=void 0,i={};for(t.reverse();t.length;){var a=t.pop();a.startsWith("-")?(r=a.substr(1),i[r]=[]):i[r].push(a)}for(r in i)if(i.hasOwnProperty(r)){n=i[r];var o=this["parse_"+r];o&&o.bind(this)(n,e)}return e}},{key:"parseMap",value:function(t){var e=void 0,r=void 0;if(t[0].startsWith("-"))e=t.pop(),r=t;else{var i=n(t);e=i[0],r=i.slice(1)}return r=this.parseOptions(r),r.filename=e,r}},{key:"parse_map_Ka",value:function(t){this.currentMaterial.mapAmbient=this.parseMap(t)}},{key:"parse_map_Kd",value:function(t){this.currentMaterial.mapDiffuse=this.parseMap(t)}},{key:"parse_map_Ks",value:function(t){this.currentMaterial.mapSpecular=this.parseMap(t)}},{key:"parse_map_Ke",value:function(t){this.currentMaterial.mapEmissive=this.parseMap(t)}},{key:"parse_map_Ns",value:function(t){this.currentMaterial.mapSpecularExponent=this.parseMap(t)}},{key:"parse_map_d",value:function(t){this.currentMaterial.mapDissolve=this.parseMap(t)}},{key:"parse_map_aat",value:function(t){this.currentMaterial.antiAliasing="on"==t[0]}},{key:"parse_map_bump",value:function(t){this.currentMaterial.mapBump=this.parseMap(t)}},{key:"parse_bump",value:function(t){this.parse_map_bump(t)}},{key:"parse_disp",value:function(t){this.currentMaterial.mapDisplacement=this.parseMap(t)}},{key:"parse_decal",value:function(t){this.currentMaterial.mapDecal=this.parseMap(t)}},{key:"parse_refl",value:function(t){this.currentMaterial.mapReflections.push(this.parseMap(t))}},{key:"parse",value:function(){var t=this.data.split(/\r?\n/),e=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;if((s=s.trim())&&!s.startsWith("#")){var u=s.split(/\s/),c=void 0,h=u,f=n(h);c=f[0],u=f.slice(1);var l=this["parse_"+c];l&&l.bind(this)(u)}}}catch(t){r=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}delete this.data,this.currentMaterial=null}}]),t}()},function(t,e,r){t.exports=r(4)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteMeshBuffers=e.initMeshBuffers=e.downloadMeshes=e.downloadModels=e.Layout=e.MaterialLibrary=e.Material=e.Mesh=void 0;var n=r(1),i=function(t){return t&&t.__esModule?t:{default:t}}(n),a=r(2),o=r(0),s=r(5);e.Mesh=i.default,e.Material=a.Material,e.MaterialLibrary=a.MaterialLibrary,e.Layout=o.Layout,e.downloadModels=s.downloadModels,e.downloadMeshes=s.downloadMeshes,e.initMeshBuffers=s.initMeshBuffers,e.deleteMeshBuffers=s.deleteMeshBuffers},function(t,e,r){"use strict";function n(t,e){var r=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];e.endsWith("/")||(e+="/");var n=[];for(var i in t.materials)if(t.materials.hasOwnProperty(i)){i=t.materials[i];var a=!0,o=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var h=u.value;!function(t){var r=i[t];if(!r)return"continue";var a=e+r.filename;n.push(fetch(a).then(function(t){if(!t.ok)throw new Error;return t.blob()}).then(function(t){var e=new Image;e.src=URL.createObjectURL(t),r.texture=e}).catch(function(){}))}(h)}}catch(t){o=!0,s=t}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}}return Promise.all(n)}function i(t){var e=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;!function(t){var r=[];if(!t.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var i=t.name;if(!i){var a=t.obj.split("/");i=a[a.length-1].replace(".obj","")}if(r.push(Promise.resolve(i)),r.push(fetch(t.obj).then(function(t){return t.text()}).then(function(t){return new h.default(t)})),t.mtl){var o=t.mtl;"boolean"==typeof o&&(o=t.obj.replace(/\.obj$/,".mtl")),r.push(fetch(o).then(function(t){return t.text()}).then(function(e){var r=new f.MaterialLibrary(e);if(!1!==t.downloadMtlTextures){var i=t.mtlTextureRoot;return i||(i=o.substr(0,o.lastIndexOf("/"))),Promise.all([Promise.resolve(r),n(r,i)])}return Promise.all(Promise.resolve(r))}).then(function(t){return t[0]}))}e.push(Promise.all(r))}(c)}}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return Promise.all(e).then(function(t){var e={},r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value,c=u(s,3),h=c[0],f=c[1],l=c[2];f.name=h,l&&f.addMaterialLibrary(l),e[h]=f}}catch(t){n=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return e})}function a(t,e,r){void 0===r&&(r={});var n=[];for(var i in t)!function(e){if(!t.hasOwnProperty(e))return"continue";var r=t[e];n.push(fetch(r).then(function(t){return t.text()}).then(function(t){return[e,new h.default(t)]}))}(i);Promise.all(n).then(function(t){var n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value,h=u(c,2),f=h[0],l=h[1];r[f]=l}}catch(t){i=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return e(r)})}function o(t,e){e.normalBuffer=l(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=l(t,t.ARRAY_BUFFER,e.textures,2),e.vertexBuffer=l(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=l(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)}function s(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.downloadModels=i,e.downloadMeshes=a,e.initMeshBuffers=o,e.deleteMeshBuffers=s;var c=r(1),h=function(t){return t&&t.__esModule?t:{default:t}}(c),f=r(2),l=(r(0),function(t,e,r,n){var i=t.createBuffer(),a=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,i),t.bufferData(e,new a(r),t.STATIC_DRAW),i.itemSize=n,i.numItems=r.length/n,i})}])})}])});